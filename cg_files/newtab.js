(function(){(function(){function a(a){if(f.prefHasUserValue(a))switch(f.getPrefType(a)){case f.PREF_BOOL:return f.getBoolPref(a);case f.PREF_INT:return f.getIntPref(a);case f.PREF_STRING:return f.getCharPref(a)}else return e[a]}Components.utils.import("resource://gre/modules/Services.jsm");var f=Services.prefs.getBranch("extensions.nspdl."),e={},b={};window.pref=function(c,d){if(null==d){if(null==c)throw"name and defaultValue must have a concrete values";return b[c]}if("string"!=typeof c)throw"name is not of type string";
e[c]=d;b.__defineGetter__(c,function(){return a(c)});b.__defineSetter__(c,function(a){var b=e[c];if("object"==typeof a)throw"object type not supported";if(b==a)f.prefHasUserValue(c)&&f.clearUserPref(c);else switch(typeof a){case "number":parseInt(a)==a?f.setIntPref(c,a):f.setCharPref(c,""+a);break;case "string":f.setCharPref(c,a);break;case "boolean":f.setBoolPref(c,a)}})};window.user=b})();(function(){var a={},f={};window.conf=function(e,b){a[e]=b;f.__defineGetter__(e,function(){return a[e]});f.__defineSetter__(e,
function(a){throw"config is not mutable, if you need mutable key/val, use preferences machanism";})};window.config=f})()})();pref("aflt","sd-msd");pref("general.guid","");pref("general.firstRun",!0);pref("general.version","0");pref("remote.mode","");pref("general.content","");pref("fmon",!1);pref("cd","");pref("cr","");pref("itype","");pref("AL",2);pref("itag","");pref("ipath","");pref("iquery","");pref("se","");pref("dm","");pref("show.top-search",!0);pref("show.top-content",!1);
pref("favorites.gallery.country","us");pref("favorites.gallery.category","331338ac");pref("favorites.user-added",!1);pref("favorites.screenshot",!1);pref("favorites.crop",!1);conf("ga.lifecycle","UA-37681646-35");conf("ga.activity","UA-37681646-40");conf("ga.samplerate",1);conf("label","mysearchdial");conf("remote.version","1.0");conf("remote.bucket","https://s3.amazonaws.com/static.addon.speedial.com/remote");conf("verified_host","");conf("surl","http://start.mysearchdial.com/?f=2&uref=[uref]&a=(aflt)&cd=(cd)&cr=(cr)&q={searchTerms}");
conf("stitle","Web Search");conf("api_request_url","http://static.addon.speedial.com/v9/");conf("image_request_url","http://static.addon.speedial.com/v9/RAW_DATA/images/");conf("feed","");conf("sfontsize",18);conf("uref","f0");conf("smethod",0);conf("info.links-0",["Rate us","Uninstall","Contact us"]);conf("info.links-1",["EULA","Privacy","About","Uninstall","Contact us"]);conf("link.eula","http://www.mysearchdial.com/eula");conf("link.privacy","http://www.mysearchdial.com/privacy-policy/");
conf("link.about","http://www.mysearchdial.com/about");conf("link.contactus","http://support.mysearchdial.com/customer/portal/emails/new?customer[custom_affiliate]=");conf("link.uninstall","newtab://uninstall");conf("theme.luminance","dark");conf("theme.background","dark_wood");conf("theme.illumination",!0);conf("theme.pattern",!1);conf("layout.3D",!1);conf("layout.num_of_cols",5);conf("layout.num_of_rows",!1);conf("layout.prop",1.4);conf("layout.show_titles",!1);conf("layout.size",300);
conf("layout.spacing",14);
var utils=function(){Services.prefs.getBranch("extensions.nspdl.");var a=Services.prefs.getBranch("extensions.nspdl.data."),f=Services.locale.getApplicationLocale().getCategory("NSILOCALE_COLLATE"),e=f.substr(0,2);return{os:function(){return""},getMessage:function(a){return""},getOrigin:function(){return"chrome://nspdlmsd"},getURL:function(a){return"chrome://nspdlmsd"+a},getPage:function(a){return"/content/"+a+".html"},getFileURL:function(a){return"resource://nspdlmsd/"+a+"?x="+(new Date).getTime()},
getFavIconURL:function(a){return"chrome://favicon/"+a},id:function(){return"{ad9a41d2-9a49-4fa6-a79e-71a0785364c8}"},version:function(){return"9.5.5"},locale:function(){return f},language:function(){return e},get:function(b){return a.prefHasUserValue(b)?a.getCharPref(b):null},set:function(b,e){a.setCharPref(b,""+e)},remove:function(b){a.clearUserPref(b)},reset:function(a){},isFirstRun:function(){return user["general.firstRun"]},isz:function(a){return!0},isUpgradeRequired:function(){return this.isFirstRun()?
!1:parseInt(user["general.version"])<parseInt("9.5.5")?!0:!1}}}(),urls=function(){return{hasProtocol:function(a){return/^(http:\/\/|https:\/\/|ftp:\/\/)/.test(a)},name2host:function(a){a=a.replace(" ","");/^[a-zA-Z0-9_]+$/.test(a)&&(a+=".com");return a=a.replace(/\/$/,"")},url2name:function(a){a=this.getHostName(a);S(a).startsWith("www.")&&(a=a.substr(4));var f=a.length,e=a.substr(f-4),b=a.substr(f-7,5),c=a.substr(f-6,4);0<=[".com",".net",".org",".gov",".edu"].indexOf(e)?a=a.substring(0,f-4):0<=[".com.",
".net.",".org.",".gov",".edu."].indexOf(b)?a=a.substring(0,f-7):0<=[".co.",".ac.",".org.",".gov",".edu."].indexOf(c)&&(a=a.substring(0,f-6));return a=S(a).contains(".")?S(a).replaceAll("."," ").humanize().capitalize().s:3==a.length?a.toUpperCase():S(a).replaceAll("."," ").humanize().capitalize().s},getFullURL:function(a){/^[a-zA-Z0-9_]+$/.test(a)&&(a+=".com");a=a.replace(/\/$/,"");this.hasProtocol(a)||(a="http://"+a);return a},ValidUrl:function(a){return RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",
"i").test(a)?!0:!1},buildURL:function(a){var f=a.match(/\[(.*?)\]/g);if("object"==typeof f)for(var e=0;e<f.length;e++){var b=f[e],b=b.substr(1,b.length-2),c=config[b];void 0==c&&(c="");b=RegExp("\\["+b+"\\]","gi");a=a.replace(b,c)}f=a.match(/\((.*?)\)/g);if("object"==typeof f)for(e=0;e<f.length;e++)b=f[e],b=b.substr(1,b.length-2),c=user[b],void 0==c&&(c=""),b=RegExp("\\("+b+"\\)","gi"),a=a.replace(b,c);return a},ensureURL:function(a){return this.hasProtocol(a)?a:"http://"+a},getHostName:function(a,
f){a=this.ensureURL(a);var e=document.createElement("a");e.href=a;e=e.hostname;return f&&0<=e.indexOf("www.")?e.substr(4):e}}}(),window=this;
(function(){window.stats=0==Math.floor(100*Math.random()/config["ga.samplerate"])?!0:!1;window.trackEvent=function(a,f,e,b,c){try{if(null!=c&&!c||window.stats){var d=Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance(Components.interfaces.nsIXMLHttpRequest);c="v=1";c+="&tid="+a;c+="&cid="+user["general.guid"];c+="&t=event";f&&(c+="&ec="+f);e&&(c+="&ea="+e);b&&(c+="&el="+b);c+="&z="+(1E9+Math.floor(1147483647*Math.random()));d.open("POST","http://www.google-analytics.com/collect",
!0);d.channel.loadFlags|=Components.interfaces.nsIRequest.LOAD_BYPASS_CACHE;d.send(c)}}catch(h){}}})();
(function(){var a="v"+parseFloat(utils.version()).toFixed(1)+(config.uref?" ("+config.uref+")":""),f=utils.id().substring(1,5)+" "+a+" - "+config.label;window.trackUserEvent=function(a,b,c,d){trackEvent(config["ga.activity"],a,b,c,d)};window.trackUrefEvent=function(e,b,c){trackEvent(c||config["ga.activity"],e,a,b,!0)};window.trackStatusEvent=function(a){try{a="evt="+a;var b="aflt="+user.aflt,c="ial="+user.AL,d="itag="+user.itag,h="uref="+config.uref,g="label="+config.label,f="ver="+utils.version(),
k="id="+utils.id().substring(1,5),n="guid="+user["general.guid"],p="cd="+user.cd,m="cr="+user.cr,r="z="+(1E9+Math.floor(1147483647*Math.random())),s=[a,b,c,d,h,g,f,k,n,p,m,r].join("&"),q=Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance(Components.interfaces.nsIXMLHttpRequest),s=JSON.stringify({table:"extensions",data:s});q.open("POST","http://ib.speedial.com",!0);q.channel.loadFlags|=Components.interfaces.nsIRequest.LOAD_BYPASS_CACHE;q.send(s)}catch(t){}};window.trackLifeCycleEvent=
function(a,b,c){trackEvent(c||config["ga.lifecycle"],a,f,b,!0)}})();
function loadResource(a,f){var e=Components.classes,b=Components.interfaces,c=Components.utils;a=utils.getURL(a);c.import("resource://gre/modules/Services.jsm");e["@mozilla.org/network/io-service;1"].getService(b.nsIIOService);e["@mozilla.org/scriptableinputstream;1"].getService(b.nsIScriptableInputStream);var e=a,c=Components.classes,d=Components.interfaces,b=c["@mozilla.org/network/io-service;1"].getService(d.nsIIOService),c=c["@mozilla.org/scriptableinputstream;1"].getService(d.nsIScriptableInputStream),e=
b.newChannel(e,null,null).open();c.init(e);b=c.read(e.available());c.close();e.close();return"xml"==f?b:"text"==f?b:JSON.parse(b)}
(function(a){function f(a,b,c){1===arguments.length&&"function"===typeof arguments[0]&&(c=arguments[0],b=a=null);2===arguments.length&&"object"===typeof arguments[0]&&"function"===typeof arguments[1]&&(a=arguments[0],c=arguments[1],b=null);if(void 0===c)throw"An iterator must be specified";"string"!==typeof b&&(b="data-labels");window.jQuery&&a instanceof jQuery&&(a=a.get(0));void 0==a&&(a=document);var d=a.querySelectorAll(".i18n");Array.prototype.forEach.call(d,function(a){if(a.hasAttribute(b)){var g=
a.getAttribute(b);g.trim&&(g=g.trim());g.split(" ").forEach(function(b){var g=b.split("#");b=g[0];var g=g[1],e=c(g);"string"!==typeof e&&(e="");e.trim&&g.trim();if(e&&"innertext"==b.toLowerCase())try{a.innerText=e}catch(d){console.log(d)}else if(e&&"innerhtml"==b.toLowerCase())try{a.innerHTML=e}catch(f){console.log(f)}else e&&a.setAttribute(b,e)})}})}window.i18n={template:function(a){f(a,function(a){return utils.getMessage(a)})},translate:function(a,b){var c=utils.getMessage(a.toLowerCase().replace(/\s|\,/g,
""));return""!=c?c:b}}})(jQuery);(function(){var a={};Components.utils.import("chrome://nspdlmsd/content/browser/background.9.5.5.jsm",a);window.service=function(f,e){e(a[f])}})();
(function(a){a.fn.sdDraggable=function(f,e,b,c){function d(b){if(n!=h){if(n==g){if(5>Math.abs(b.clientX-k.startX)&&5>Math.abs(b.clientY-k.startY))return;var c=a(k.target).offset(),d=a(k.target).detach();a("#content-area").append(d);a(d).css({"z-index":1E3,position:"fixed",top:c.top,left:c.left});k.fixOffsetX=b.clientX-parseFloat(k.target.style.left);k.fixOffsetY=b.clientY-parseFloat(k.target.style.top);n=l;try{f(k,b)}catch(s){console.log(s)}}c=b.clientY-k.fixOffsetY;k.target.style.left=b.clientX-
k.fixOffsetX+"px";k.target.style.top=c+"px";try{e(k,b)}catch(q){console.log(q)}}}var h=0,g=1,l=2,k={},n=h;a(document).on("mousedown",this.selector,function(h){if(0==h.button){h.stopPropagation();h.preventDefault();var b=h.currentTarget;n=g;k.target=b;k.sLeft=parseFloat(b.style.left);k.sTop=parseFloat(b.style.top);k.startX=h.clientX;k.startY=h.clientY;k.offsetX=h.clientX-parseFloat(b.style.left);k.offsetY=h.clientY-parseFloat(b.style.top);k.fixOffsetX=h.clientX-parseFloat(b.style.left);k.fixOffsetY=
h.clientY-parseFloat(b.style.top);a(document).on("mousemove",d);return!1}});a(document).on("mouseup",function(b){a(document).unbind("mousemove",d);if(n!=h)if(n==g)n=h;else return n=h,c(k,b),!1});return this}})(window.jQuery);
(function(a){var f={},e={open:function(b){f=b;var c=this;a.isFunction(f.open)&&f.open();b=a("<div>");b.css({position:"fixed",top:0,bottom:0,left:0,right:"0","z-index":1040,"background-color":"black",opacity:"0"});a("body").append(b);b[0].offsetWidth;b.addClass("modal-backdrop").addClass("in").css("opacity",0.5);b.one("click",function(){c.sdModal("close")});this.css({top:"-100%",position:"fixed","z-index":1050,margin:"auto",left:0,right:0,outline:"none"});this.show();this[0].offsetWidth;b=Math.floor(Math.abs(window.innerHeight-
this[0].offsetHeight)/4);this.css({top:b});this.addClass("open");a.isFunction(f.show)&&f.show()},close:function(){a.isFunction(f.hide)&&f.hide();a(".modal-backdrop").removeClass("in").css("opacity",0);setTimeout(function(){a(".modal-backdrop").remove()},100);this.hide();this.removeClass("open");a.isFunction(f.close)&&f.close()}};a.fn.sdModal=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.sdModal");
else return e.init.apply(this,arguments)}})(window.jQuery);
(function(a){function f(a){this.$el=a;this.settings={};this.handlers={};this.vHandlerName=null;this.callbacks={}}f.prototype={init:function(e,b){this.callbacks=b;this.handlers=e;a.each(this.handlers,function(){a.isFunction(this.handler.onSubmit)&&a("#"+this.id).submit(this.handler.onSubmit)})},show:function(e){var b=this.handlers[e],c=a("#"+b.id,this.$el),d=c.data("height"),h=c.data("width"),g=this,f=a(".modal-footer",this.$el).outerHeight()+a(".modal-header",this.$el).outerHeight();if(!this.$el.hasClass("open"))a("form",
this.$el).css("display","none"),this.$el.width(h),c.css({display:"block"}),this.vHandlerName=e,this.$el.sdModal("open",{open:function(){a.isFunction(g.callbacks.open)&&g.callbacks.open();if(b.handler.onShow)b.handler.onShow()},show:function(){a.isFunction(g.callbacks.show)&&g.callbacks.show()},hide:function(){a.isFunction(g.callbacks.hide)&&g.callbacks.hide()},close:function(){var h=g.handlers[g.vHandlerName];if(h.handler.onHide)h.handler.onHide();a.isFunction(g.callbacks.close)&&g.callbacks.close();
a.each(g.handlers,function(){if(a.isFunction(this.handler.onClose))this.handler.onClose()})}});else if(e!=this.vHandlerName){var k=this.handlers[this.vHandlerName],n=a("#"+k.id,this.$el);n.data("height");n.data("width");var p=Math.floor(Math.abs(window.innerHeight-d)/4),m=this.$el;m.addClass("multiforming");n.fadeOut("fast",function(){if(k.handler.onHide)k.handler.onHide();if(b.handler.onShow)b.handler.onShow();var a=n.data("height"),s=n.data("width"),q=function(){m.removeClass("multiforming");g.vHandlerName=
e;c.fadeIn("fast")}.bind(self);h!=s&&d!=a?m.animate({top:p,height:f+d},200).animate({width:h},200,q):m.animate({width:h,top:p,height:f+d},200,q)})}},close:function(){this.$el.sdModal("close")}};a.fn.sdDialog=function(e){var b=this.data("sdDialog");b||(b=new f(this),this.data("sdDialog",b));if(b[e])return b[e].apply(b,Array.prototype.slice.call(arguments,1));if("object"!==typeof e&&e)a.error("Method "+e+" does not exist on jQuery.sdModal");else return b.init.apply(b,arguments)}})(window.jQuery);
(function(a){function f(){return this.state?{top:window.innerHeight-b.offset.top-this.$el.outerHeight(),left:window.innerWidth-b.offset.right-this.$el.outerWidth()}:{top:window.innerHeight,left:window.innerWidth-b.offset.right-this.$el.outerWidth()}}function e(a){this.$el=a;this.state=!1}var b={offset:{top:0,right:0,speed:500}};e.prototype={init:function(c){"object"===typeof c&&(b=a.extend(b,c));this.$el.hide();this.$el.css({position:"absolute",display:"none",zIndex:9});this.$el.css(f.call(this));
a(window).on("resize",function(){this.$el.css(f.call(this))}.bind(this))},toggle:function(){this.state=!this.state;var a=f.call(this);this.state&&this.$el.show();this.$el.animate({top:a.top},b.offset.speed,function(){this.state||this.$el.hide()}.bind(this))}};a.fn.sdSlider=function(b){var d=this.data("sdSlider");d||(d=new e(this),this.data("sdSlider",d));if(d[b])return d[b].apply(d,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.sdModal");
else return d.init.apply(d,arguments)}})(window.jQuery);
(function(a){a.fn.sdBalloon=function(f,e){var b=a(this);if(0==b.length)return this;if(e.clazz)var c=e.clazz;c=a('<div class="balloon '+c+'"><p></p><div class="arrow"></div>');a("p",c).css({margin:"10px","font-size":"13px"}).text(f);a(".arrow",c).css({"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAICAYAAAAiJnXPAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAk0lEQVQoU43Oyw6CMBAF0FmwYUOfLA3WCihEfAT9/z+7tk3aqC2Ji0kn6Zw7QwCoVFq3IKK69LcJtGohhHQmD82QUhrdzuB2WXHY9+BcZPALSSlhOov78sTj+go12LOD3J9axa0J+URrhjQckX/HfgZjLEEXQJVPGo9TEUQ8nRY0TYA1+cYnfSZv9bODYeM/w78zb3AlygY4CGoFAAAAAElFTkSuQmCC)",width:"13px",
height:"8px",top:"-7px",left:"26px",position:"absolute"});c.css({color:"white","z-index":1E4,"max-width":200,"min-height":50,"box-shadow":"20px 30px 40px 4px rgba(0,0,0,0.7)",border:"1px solid #0C0C0C",position:"absolute"});c.css({background:"-webkit-linear-gradient(top,#303033,#2C2C2C)"});c.css({background:"-moz-linear-gradient(top,#303033,#2C2C2C)"});c.css("left",b.offset().left);c.css("top",b.height()+12);a("#newtab").append(c);return this}})(jQuery);
var LayoutHandler=function(){function a(a,e,b,c,d,h,g){this.width=a;this.height=e;this.num_of_slots=this.num_of_cols=this.num_of_rows=0;this.num_of_items=b;this.min_space=g.min_space;this.min_width=g.min_width;this.max_width=g.max_width;this.propotion=g.propotion;this.centerlize=null==h?!0:h;this.min_height=this.min_width/this.propotion;this.max_height=this.max_width/this.propotion;this.v_space=void 0==g.vspace?48:g.vspace;this.h_margin=g.margin;this.perspective=g.perspective?"concave":null;a=Math.floor((a-
(0==this.h_margin?0:2*(a/100)*this.h_margin))/(this.min_width+this.min_space));if(c<=a)this.num_of_cols=c,this.force_min=!1;else{e=!1;for(c-=1;c>d;c-=2)if(c<=a){e=!0;this.force_min=this.num_of_cols=c;break}e||(this.force_min=this.num_of_cols=d)}this.num_of_rows=Math.ceil(b/this.num_of_cols);this.num_of_slots=this.num_of_rows*this.num_of_cols}a.prototype.isPacked=function(){return this.force_min};a.prototype.getSlotByXY=function(a,e){a=parseFloat(a.toFixed(1));e=parseFloat(e.toFixed(1));for(var b=
0;b<this.num_of_slots;b++){var c=this.getMetrics(b);if(c.top<=e&&c.top+c.height>=e&&c.left<=a&&c.left+c.width>=a)return b}return-2};a.prototype.getOverlapSlotByXY=function(a,e){for(var b=[{s:null},{s:null},{s:null},{s:null}],c=0;c<this.num_of_items;c++){var d=this.getMetrics(c);d.top<=e&&d.top+d.height>=e&&d.left<=a&&d.left+d.width>=a?b[0]={s:c,x:d.left,dy:d.top+d.height-e,dx:d.left+d.width-a}:d.top<=e&&d.top+d.height>=e&&d.left<=a+d.width&&d.left>=a?b[1]={s:c,x:d.left,dy:d.top+d.height-e,dx:a+d.width-
d.left}:d.top<=e+d.height&&d.top>=e&&d.left<=a&&d.left+d.width>=a?b[2]={s:c,x:d.left,dy:e+d.height-d.top,dx:d.left+d.width-a}:d.top<=e+d.height&&d.top>=e&&d.left<=a+d.width&&d.left>=a&&(b[3]={s:c,x:d.left,dy:e+d.height-d.top,dx:a+d.width-d.left})}d={s:null,dx:0,dy:0};for(c=0;c<b.length;c++)null!=b[c].s&&b[c].dx>=d.dx&&b[c].dy>=d.dy&&(d=b[c]);return d.s};a.prototype.packSlides=function(){for(var a=0;a<this.num_of_rows;a++){var e=this.getMetrics(a*this.num_of_cols);if(e.top+e.height>=this.height){this.num_of_rows=
a;this.num_of_items=Math.min((a+1)*this.num_of_cols,this.num_of_items);this.num_of_slots=this.num_of_rows*this.num_of_cols;break}}};a.prototype.getMetrics=function(a){var e=a%this.num_of_cols,b=this.v_space;a=Math.floor(a/this.num_of_cols);if(this.force_min){var c=this.min_space,d=this.min_width,h=d/this.propotion,g=this.width-this.num_of_cols*d-(this.num_of_cols-1)*c;0>g&&(g=0);c=g/2+e*(d+c)}else{g=0==this.h_margin?0:this.width/100*this.h_margin;if(0==this.min_space)var d=this.min_width,c=0,d=parseInt((this.width-
2*g)/this.num_of_cols);else d=this.min_width/this.min_space,c=(this.width-2*g)/(this.num_of_cols*d+this.num_of_cols-1),d=parseInt(c*d);d>this.max_width&&(d=this.max_width,g=(this.width-this.num_of_cols*d-(this.num_of_cols-1)*c)/2);var h=d/this.propotion,c=(this.centerlize?g:0)+e*(d+c)}g=this.height-this.num_of_rows*h-(this.num_of_rows-1)*b;b=(g<this.height/10?this.height/10:g/2.5)+a*(h+b);if("convex"==this.perspective||"concave"==this.perspective){a=e+1-Math.floor(this.num_of_cols/2);var g=a-1,l=
0,e="";0!=g&&(l=4*(0<g?1:-1),e=0<g?"0% 50%":"100% 50%");var k=0+7*(a-1)+l,n=l=0;if(1<g||-1>g){var p=Math.abs(g)-1;for(a=0;a<p;a++)var m=(4+7*(a+1))/180*Math.PI,l=l+(d-Math.cos(m)*d),n=n+Math.sin(m)*d;l*=1<g?-1:1}a=-k;"convex"==this.perspective&&(a=-a,n=-n);return{top:parseFloat(b.toFixed(1)),left:parseFloat(c.toFixed(1)),width:parseFloat(d.toFixed(1)),height:parseFloat(h.toFixed(1)),rotateY:a,translateX:l,translateZ:n,tOrigin:e}}return{top:parseFloat(b.toFixed(1)),left:parseFloat(c.toFixed(1)),width:parseFloat(d.toFixed(1)),
height:parseFloat(h.toFixed(1)),rotateY:0,translateX:0,translateZ:0}};return a}(),StripLayoutHandler=function(){function a(a,e,b,c,d){this.width=a;this.height=e;this.num_of_slots=0;this.num_of_items=b;this.min_space=d.min_space;this.min_width=d.min_width;this.max_width=d.max_width;this.propotion=d.propotion;this.centerlize=null==c?!0:c;this.min_height=this.min_width/this.propotion;this.max_height=this.max_width/this.propotion;this.h_margin=d.margin;this.num_of_slots=this.size_of_grid=Math.min(Math.floor((a-
(0==this.h_margin?0:2*(a/100)*this.h_margin))/(this.min_width+this.min_space)),b)}a.prototype.getSlotByXY=function(a){for(var e=0;e<this.num_of_items;e++){var b=this.getMetrics(e);if(b.left<=a&&b.left+b.width>=a)return e}return-2};a.prototype.isPacked=function(){return!0};a.prototype.getOverlapSlotByXY=function(a){for(var e=[{s:null},{s:null}],b=0;b<this.num_of_items;b++){var c=this.getMetrics(b);c.left<=a&&c.left+c.width>=a?e[0]={s:b,x:c.left,dx:c.left+c.width-a}:c.left<=a+c.width&&c.left>=a&&(e[1]=
{s:b,x:c.left,dx:a+c.width-c.left})}a={s:null,dx:0};for(b=0;b<e.length;b++)null!=e[b].s&&e[b].dx>=a.dx&&(a=e[b]);return a.s};a.prototype.getMetrics=function(a){var e=this.min_width/this.min_space,b=0==this.h_margin?0:this.width/100*this.h_margin,c=(this.width-2*b)/(this.num_of_slots*e+this.num_of_slots-1),e=c*e;e>this.max_width&&(e=this.max_width,b=(this.width-this.num_of_slots*e-(this.num_of_slots-1)*c)/2);var d=e/this.propotion;return{top:(this.height-d)/2,left:(this.centerlize?b:0)+a*(e+c),width:e,
height:d}};return a}(),DnDHandler=function(){function a(a,b){b.left<a.left?b.left-=13:b.left>a.left&&(b.left+=13);b.top<a.top?b.top-=13:b.top>a.top&&(b.top+=13)}function f(a){this.dHandler=a;a=a.selector;var b=".dhPlus"+a;this.selector=a+":not("+b+")";this.no_selector=b}(function(){function a(b){var e,h;e=$(b).offset();h=$(b).width();b=$(b).height();return[[e.left,e.left+h],[e.top,e.top+b]]}function b(a,b){var h,g;h=a[0]<b[0]?a:b;g=a[0]<b[0]?b:a;return h[1]>g[0]||h[0]===g[0]}return function(c,d){var h=
a(c),g=a(d);return b(h[0],g[0])&&b(h[1],g[1])}})();f.prototype.dragstart=function(e,b){this.not_original_page=!1;this.dHandler.dragging=!0;var c=this.dHandler.layout,d=e.target,d=c.getSlotByXY(e.sLeft,e.sTop);e.index=d;this.dragging=!0;this.dHandler.detach(e.target);this.dHandler.createLayout({"3D":!0},null,this.dHandler.items_to_show.length);var h=this.selector,c=this.dHandler.layout;this.num_of_slots=$(h).length+1;$(this.no_selector).css("opacity",0);d=e.target;$(d).css({"z-index":100}).addClass("dragging");
$(".fav-shadow").css({opacity:0});$(h).addClass("shadow-float");$(h).not(d).addClass("slot-animation-slow");var g=c.getMetrics(e.index),l=this;$(h).each(function(b,h){var e=c.getMetrics(b);a(g,e);l.dHandler.setMetrics(h,e)})};f.prototype.dragidle=function(a,b){};f.prototype.slide=function(a,b){var c=b.clientX-a.fixOffsetX;if(1230<c&&!0!==this.ddd){this.dHandler.slide("left");this.dragstart(a,b);this.ddd=!0;var d=this;setTimeout(function(){d.ddd=!1},300)}else 50>c&&!0!==this.ccc&&(this.dHandler.slide("right"),
this.dragstart(a,b),this.ccc=!0,d=this,setTimeout(function(){d.ccc=!1},300))};f.prototype.dragmove=function(e,b){var c=this.dHandler.layout,d=b.clientX-e.offsetX,h=b.clientY-e.offsetY,g=this;void 0==this.slidingDrag&&(this.slidingDrag=!1);var l=c.getOverlapSlotByXY(d,h),k=c.getMetrics(e.index),d=this.selector,g=this,h=null==this.dragOnIndex||this.dragOnIndex!=l;if(null!=l&&l<this.num_of_slots&&h){var f=0;$(d).each(function(b,h){if(h!=e.target){g.dragOnIndex=l;var d=f<l?c.getMetrics(f):c.getMetrics(f+
1);a(k,d);g.dHandler.setMetrics(h,d);f++}})}};f.prototype.dragend=function(a,b){this.dHandler.dragging=!1;this.dHandler.special=!1;this.dHandler.createLayout({"3D":!0},null,this.dHandler.items_to_show.length);var c=this.selector,d=a.target;$(d).css("z-index",0);$(c).removeClass("shadow-float");$(c).removeClass("slot-animation-slow");setTimeout(function(){$(d).removeClass("dragging");$(".fav-shadow").css({opacity:1})},100);var h=this;if(null!=this.dragOnIndex){var g=b.clientX-a.offsetX,l=b.clientY-
a.offsetY;$(a.target).css("left",g);$(a.target).css("top",l);$(a.target).css("position","absolute");this.dragOnIndex==this.num_of_slots-2?(c=$(c)[this.dragOnIndex-1],$(a.target).insertAfter(c)):(c=$(c)[this.dragOnIndex],$(a.target).insertBefore(c));c=this.dragOnIndex+this.dHandler.index_of_first_item;try{this.dHandler.attach(a.target,c)}catch(k){console.log(k)}setTimeout(function(){h.dHandler.reposition("medium")},0)}else c=this.dHandler,g=c.layout.getMetrics(0),$(a.target).css({position:"absolute"}).appendTo("#"+
c.container_id+" div"),c.setMetrics(a.target,g),c.dHandler.reposition("fast");this.dragOnIndex=null};return{init:function(a){a=new f(a);$(a.selector).sdDraggable(a.dragstart.bind(a),a.dragmove.bind(a),a.dragidle.bind(a),a.dragend.bind(a))}}}(),SliderHandler=function(a){function f(a){this.container=a}f.prototype.slide=function(e,b,c){function d(){r.offsetWidth;a(r).css({opacity:"",top:"0",left:"0","-webkit-transform":"",transform:""});a(m).css(k);setTimeout(function(){a.each(g.children,function(){this!==
r&&a(this).remove()});h.remove();try{a.isFunction(c)&&c(r)}catch(b){console.log(b)}},1E3*f)}var h=a("<div>");h.css({position:"fixed",top:0,bottom:0,left:0,right:0,"z-index":9999,"background-color":"transparent",opacity:"1"});a("body").append(h);var g=this.container;switch(e){case "left":var l={opacity:0,left:g.offsetWidth+100},k={opacity:1,left:-g.offsetWidth-100};break;case "right":l={opacity:0,left:-g.offsetWidth-100};k={opacity:1,left:g.offsetWidth+100};break;case "out":l={opacity:0,transform:"scale(0.35,0.35)",
"-webkit-transform":"scale(0.35,0.35)"};k={opacity:1,"z-index":"1",transform:"scale(2,2)","-webkit-transform":"scale(2,2)"};break;case "in":l={opacity:0,transform:"scale(5,5)","-webkit-transform":"scale(5,5)"};k={opacity:1,transform:"scale(0.35,0.35)","-webkit-transform":"scale(0.35,0.35)"};break;case "up":l={opacity:0,top:g.offsetHeight+100};k={opacity:1,top:-g.offsetHeight-100};break;case "down":l={opacity:0,top:-g.offsetHeight-100},k={opacity:1,top:g.offsetHeight+100}}var f=0.2,p=f+"s";e={"-webkit-transition-property":"left,top,-webkit-transform",
"-webkit-transition-timing-function":"ease-out,ease-out,ease-out","-webkit-transition-duration":p+","+p+","+p};var p={"transition-property":"left,top,-moz-transform","transition-timing-function":"ease-out,ease-out,ease-out","transition-duration":p+","+p+","+p},m=g.children[0];a(m).css(e);a(m).css(p);var r=a("<div>").css(e).css(p).css(l).css({display:"none",position:"absolute",width:"100%",height:"100%"})[0];a(g).append(r);r.style.display="block";try{a.isFunction(b)?b(r,d):d()}catch(s){console.log(s)}};
return f}(window.jQuery),SimpleContentHandler=function(){function a(a,e){this.id=a;this.content_model=e}a.prototype.init=function(){newtab.initCSS(this.content_model.style()+".css")};a.prototype.reset=function(){};return a}(),TilesContentHandler=function(){function a(a){$("#content .right-arrow").css("display",a.current_page<a.num_of_pages-1?"block":"none"),$("#content .left-arrow").css("display",0<a.current_page?"block":"none");if(1<a.num_of_pages){for(var b="<ul>",c=0;c<a.num_of_pages;c++)b=c==
a.current_page?b+'<li class="selected"></li>':b+"<li></li>";b+="</ul>";$("#paging-control").css("display","block").empty().append($(b));$("#paging-control li").click(function(){var b=$("#paging-control li").get().indexOf(this);a.gotoPage(b,"sides")}).show()}else $("#paging-control").css("display","none")}function f(b){var g=b.items.length-b.size_of_grid-b.index_of_first_item,c=b.index_of_first_item,d=0,e=0;0<b.size_of_grid&&(d=Math.ceil(g/b.size_of_grid),e=Math.ceil(c/b.size_of_grid));b.num_of_pages=
1+d+e;b.current_page=e;a(b)}function e(a,b,c){a.createLayout({"3D":!0},b,function(){a.size_of_grid=a.layout.num_of_slots;a.items_to_show=a.items.slice(a.index_of_first_item,a.index_of_first_item+a.layout.num_of_slots);a.createLayout({"3D":!0},b,a.items_to_show.length,function(){$(b).empty().append(Mustache.render(a.mtemplate,a.items_to_show));a.reposition(!1,b);f(a);var d=a.reposition(!1,b);$.isFunction(a.content_model.onDraw)&&$(a.selector).each(function(){try{a.content_model.onDraw(this,a,d)}catch(b){console.log(b)}});
$.isFunction(c)&&c()})})}function b(a,b,c){a.createLayout({"3D":!0},function(d){a.size_of_grid=a.layout.num_of_slots;var e=_.pluck(a.items_to_show,"index");a.items_to_show=a.items.slice(a.index_of_first_item,a.index_of_first_item+a.layout.num_of_slots);var p=_.difference(e,_.pluck(a.items_to_show,"index")),m=_.filter(a.items_to_show,function(a){return!_.contains(e,a.index)}),r="#"+a.container_id+" > div";0==p.length&&0==m.length?a.createLayout({"3D":!0},null,a.items_to_show.length,function(){var d=
a.reposition(b);f(a);$.isFunction(c)&&c(d)}):(0<p.length&&_.each($(a.selector),function(a){_.contains(p,parseInt(a.dataset.index))&&$(a).remove()}),0<m.length&&(m=$(Mustache.render(a.mtemplate,m)),m.each(function(){$(a).css({opacity:"0","-webkit-transition":"opacity 0.1s linear"});$(a).css({opacity:"0","-moz-transition":"opacity 0.1s linear"})}),r="#"+a.container_id+" > div",$(r).append(m),$.isFunction(a.content_model.onDraw)&&$(m).each(function(){try{a.content_model.onDraw(this,a,d)}catch(b){console.log(b)}})),
setTimeout(function(){a.createLayout({"3D":!0},null,a.items_to_show.length,function(){var b=a.reposition(!0);f(a);$.isFunction(c)&&c(b)})},0))})}function c(a){a.mtemplate="{{#.}}"+('<div class="dhItem '+a.id+' index-{{index}}" data-index="{{index}}">')+a.template+"</div>{{/.}}";var b=$("<div>",{id:a.container_id,"class":"container "+a.id}),c=$("<div>").css({position:"absolute",width:"100%",height:"100%"});c.addClass("surface");b.append(c);a.sliderHandler=new SliderHandler(b[0]);var d=$('<div class="paging-arrow left-arrow"></div>').click(function(){a.gotoPage("<<",
"sides")}),f=$('<div class="paging-arrow right-arrow"></div>').click(function(){a.gotoPage(">>","sides")});$(a.container_div).empty().append([d,f,b]);a.index_of_first_item=0;a.current_page=0;e(a,c[0],null)}function d(a,b){this.content_model=b;this.id=a;this.template=b.template();this.container_div="#content";this.selector=".dhItem."+a;this.container_id=a+"-container";this.layout_packed=null}d.prototype.gotoPage=function(a,b,c){var d=this,f=!0;switch(a){case ">>":d.index_of_first_item+=d.size_of_grid;
b="scale"==b?"in":"left";break;case "<<":d.index_of_first_item-=d.size_of_grid;0>d.index_of_first_item&&(d.index_of_first_item=0);b="scale"==b?"out":"right";break;case "last":d.current_page==d.num_of_pages-1?f=!1:(d.index_of_first_item+=d.size_of_grid*(d.num_of_pages-d.current_page-1),b="scale"==b?"in":"left");break;case "first":0==d.current_page?f=!1:(d.index_of_first_item=0,b="scale"==b?"out":"right");break;default:d.current_page==a?f=!1:(d.index_of_first_item+=d.size_of_grid*(a-d.current_page),
b="scale"==b?0<a-d.current_page?"in":"out":0<a-d.current_page?"left":"right",0>d.index_of_first_item&&(d.index_of_first_item=0))}f?d.sliderHandler.slide(b,function(a,b){e(d,a,b)},c):$.isFunction(c)&&c()};d.prototype.setMetrics=function(a,b,d){try{d||(a.style.width=b.width+"px",a.style.height=b.height+"px",a.style.left=b.left+"px",a.style.top=b.top+"px");var c=" rotateY("+b.rotateY+"deg) ",e=" translateZ("+b.translateZ+"px) ",f=" translateX("+b.translateX+"px) ";a.style["-webkit-transform"]=e+f+c;
a.style["-webkit-transform-origin"]=b.tOrigin;a.style.transform=e+f+c;a.style["transform-origin"]=b.tOrigin}catch(m){console.log(m)}};d.prototype.createLayout=function(a,b,d,c){$.isFunction(b)?(c=b,b=null):$.isFunction(d)&&(c=d,d=null);b=b||$("#"+this.container_id+" > div")[0];var e=b.offsetWidth,f=b.offsetHeight,m=this;"top"==this.content_model.type?this.layout=new StripLayoutHandler(e,f,this.TOTAL_NUM_OF_ITEMS,!1,this.content_model.layout_dimensions(a)):newtab.getCurrentLayoutConfig()(a,function(a){var b=
parseInt(a.WIDE_NUM_OF_COLS),h=a.NARROW_NUM_OF_COLS;if(d)var g=d;else g=a.MAX_NUM_OF_ROWS,g=!1!==g?g*b:m.TOTAL_NUM_OF_ITEMS;a.max_width=parseInt(a.max_width);a.min_space=parseInt(a.min_space);a.propotion=parseFloat(a.propotion);m.layout=new LayoutHandler(e,f,g,parseInt(b),h,!0,a);d||m.layout.packSlides();"function"==typeof c&&(a=m.layout.getMetrics(0),c(a))})};d.prototype.remove=function(a){var d=$(a).data("index"),c=this;$(a).fadeOut(150,function(){var a=_.indexOf(_.pluck(c.items,"index"),d);c.items.splice(a,
1);c.TOTAL_NUM_OF_ITEMS--;b(c,!0)})};d.prototype.append=function(a,d){var c=this;c.gotoPage("last","sides",function(e){c.TOTAL_NUM_OF_ITEMS++;a.index=c.next_index;c.next_index++;c.items.push(a);b(c,!0,function(a){c.gotoPage("last","sides");if($.isFunction(d))try{d(a)}catch(b){console.log(b)}})})};d.prototype.resize=function(a){a=a||this.layout_packed!==this.layout.isPacked()?!0:!1;this.layout_packed=this.layout.isPacked();b(this,a)};d.prototype.refresh=function(){b(this,!0)};d.prototype.update=function(a,
b){var c=a.data("index");b.index=c;var d=_.indexOf(_.pluck(this.items,"index"),c);this.items[d]=b;c=$(this.selector+".index-"+c);if(c.length&&(c.empty().append(Mustache.render(this.template,b)),c.unbind(),$.isFunction(this.content_model.onDraw)))try{this.content_model.onDraw(c.get(0),this)}catch(e){console.log(e)}};d.prototype.detach=function(a){a=a.dataset.index;a=_.pluck(this.items,"index").indexOf(parseInt(a));this.detachItem=this.items.splice(a,1)[0]};d.prototype.attach=function(a,b){this.items.splice(b,
0,this.detachItem);var c=$("div:first-child",a).data();this.content_model.onMove(c,b)};d.prototype.reposition=function(a,b){b=b||$("#"+this.container_id+" > div")[0];var c=null;!0===a?c="slot-animation":"slow"===a?c="slot-animation-slow":"medium"===a?c="slot-animation-medium":"fast"===a&&(c="slot-animation");var d=this.selector;null!=c&&($(d,b).addClass(c),setTimeout(function(){$(d).removeClass(c)},500));$(d).css("opacity",1);var e=this,f=e.layout,m=(f.num_of_rows-1)*f.num_of_cols,r={};$(d,b).each(function(a,
b){var c=f.getMetrics(a);if(0==r.width||0==r.height)r.width=c.width,r.height=c.height;$(b).css("display","block");e.setMetrics(b,c);if($.isFunction(e.content_model.onReposition))try{e.content_model.onReposition(b,c)}catch(d){console.log(d)}a>=m?$(b).addClass("reflect"):$(b).removeClass("reflect")});return r};d.prototype.reset=function(){var a=this;this.content_model.items(function(b){_.each(b,function(a,b){a.index=b});a.items=b;a.TOTAL_NUM_OF_ITEMS=b.length;a.next_index=a.TOTAL_NUM_OF_ITEMS;c(a)})};
d.prototype.init=function(){var a=this,b=this.content_model;newtab.initCSS(b.style()+".css");b.items(function(b){_.each(b,function(a,b){a.index=b});a.items=b;a.TOTAL_NUM_OF_ITEMS=b.length;a.next_index=a.TOTAL_NUM_OF_ITEMS;c(a)});$.isFunction(this.content_model.onMove)&&DnDHandler.init(this);this.init=!1};return d}();
function AutoSuggest(a,f,e){var b=this,c=null,d="",h=f;b.asDiv=null;var g=-1,l=0;b.action=e;b.init=function(){a.addEventListener("keydown",b.keyDown,!1);a.addEventListener("keyup",b.keyUp,!1)};b.setSuggestUrl=function(a){h=a};b.sprintf=function(a,b){var c=a,d;for(d in b)c=c.replace(RegExp("\\{"+d+"\\}","gi"),b[d]);return c};b.getData=function(c){if(!c)b.asDiv.style.display="none";else if(void 0!==h&&""!==h){var e=utils.locale(),e=e.replace("_","-"),e=b.sprintf(h,{searchTerms:c,lang:e,country:""}),
f;f=new XMLHttpRequest;f.open("GET",e,!0);f.onreadystatechange=function(){if(4==f.readyState&&200==f.status){var e;if(d==c){null==b.asDiv&&(b.asDiv=document.getElementById("search-suggestion-pad"));b.asDiv.innerHTML=null;e=JSON.parse(f.response);e=e[1];l=e.length;for(var h=0;h<l&&5>h;h++){var s=e[h],q=document.createElement("li"),t=s.indexOf(c);-1!=t?q.innerHTML=s.substr(0,t+c.length)+"<b>"+s.substr(t+c.length)+"</b>":q.textContent=s;q.setAttribute("id","auto-suggest-row"+h);q.index=h;q.isRow=!0;
q.addEventListener("mouseover",function(a){a=a.currentTarget;-1!=g&&document.getElementById("auto-suggest-row"+g).setAttribute("class","");a.setAttribute("class","selected");g=a.index},!1);q.addEventListener("click",function(c){var d=c.currentTarget;a.value=d.textContent;b.onSearch(d.textContent);c.preventDefault()},!1);b.asDiv.appendChild(q)}g=-1;0==l?b.asDiv.style.display="none":($(b.asDiv).css({top:$("#search-box").offset().top+$("#search-box").height()+3,left:$("#search-input").offset().left,
width:$("#search-box").width()}),b.asDiv.style.display="block")}}};f.send("")}};b.keyUp=function(e){e=e.keyCode;13!=e&&38!=e&&40!=e&&116!=e&&(null!=c&&(window.clearInterval(c),c=null),d=a.value,c=setTimeout(b.getData,10,a.value))};b.keyDown=function(b){b=b.keyCode;if(38==b||40==b)38==b?(-1!=g&&document.getElementById("auto-suggest-row"+g).setAttribute("class",""),g--,0>g&&(g=l-1)):(-1!=g&&document.getElementById("auto-suggest-row"+g).setAttribute("class",""),g++,g>=l&&(g=0)),b=document.getElementById("auto-suggest-row"+
g),b.setAttribute("class","selected"),a.value=b.textContent};b.documentMouseDown=function(a){if(a.explicitOriginalTarget!=b.asDiv&&(d="--",null!=b.asDiv)){b.asDiv.style.display="none";try{document.getElementById("container").style.height="3px"}catch(c){console.log(c)}}};b.setASdivPosition=function(){for(var c=a,d=0,e=a.offsetHeight-1;c.offsetParent&&"body"!=c.tagName.toLowerCase();)d+=c.offsetLeft,e+=c.offsetTop,c=c.offsetParent;d+=c.offsetLeft;e+=c.offsetTop;null!=b.asDiv&&(b.asDiv.style.left=d+
"px",b.asDiv.style.top=e+"px")};b.onSearch=function(a){d="--";null!=b.asDiv&&(b.asDiv.style.display="none",document.getElementById("container")&&(document.getElementById("container").style.height="29px"),b.action())};b.changeSuggestUrl=function(a){h=a};b.init()}function getElementScreenPosition(a){for(var f={left:0,top:0},e=0,b=0;a.offsetParent&&"body"!=a.tagName.toLowerCase();)e+=a.offsetLeft,b+=a.offsetTop,a=a.offsetParent;e+=a.offsetLeft;b+=a.offsetTop;f.left=e;f.top=b;return f}
(function(){try{setTimeout(function(){utils.set("ntopen",Math.round((new Date).getTime()/1E3/60));trackLifeCycleEvent("newtab",user.itag);var a;a=new Date;a=a.getFullYear()+("0"+(a.getMonth()+1)).slice(-2)+("0"+a.getDate()).slice(-2);if(null==utils.get("activeDate")||utils.get("activeDate")!=a)utils.set("activeDate",a),trackLifeCycleEvent("active",user.itag),trackStatusEvent("active")},150)}catch(a){console.log(a)}})();
function howToOpen(a){if(1!=a.which&&2!=a.which)return 0;var f=2==a.which||a.ctrlKey;a=a.shiftKey;return f&&a?2:f?3:a?4:1}
function openByClick(a,f,e){if(1!=a.which&&2!=a.which)return!0;/^(chrome:\/\/|http:\/\/|https:\/\/|ftp:\/\/|chrome-extension:\/\/)/.test(f)||(f="http://"+f);var b=window.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebNavigation).QueryInterface(Components.interfaces.nsIDocShellTreeItem).rootTreeItem.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow).gBrowser;switch(howToOpen(a)){case 2:case 4:b.selectedTab=
b.addTab(f);break;case 3:b.addTab(f);break;case 1:if(e)return!1;window.location=f}return!0}window.newtab=window.newtab||{};
(function(a,f){a.extend(f,{getUserLayoutPreferences:function(a){var b=this.getActiveContent().plugin.id;window.service("layouts",function(c){c.get(b,function(b){var c="3D show_titles num_of_cols num_of_rows prop size spacing".split(" "),g={},l;for(l in c){var k=c[l];g[k]=null!=b[k]?b[k]:config["layout."+k];"show_titles"==k&&f.setClassState("titles",g[k])}a(g)})})},getCurrentLayoutConfig:function(a){this.getActiveContent();return function(a,c){f.getUserLayoutPreferences(function(a){var b=a.spacing,
e=4>=b?1.5*b:2*b,f=a["3D"];c({MAX_NUM_OF_ROWS:a.num_of_rows,WIDE_NUM_OF_COLS:a.num_of_cols,NARROW_NUM_OF_COLS:2,min_space:f?b/3:b,min_width:108,max_width:a.size,propotion:a.prop,show_titles:a.show_titles,margin:4,vspace:f?e/3:e,perspective:f})})}}})})(jQuery,window.newtab);window.newtab=window.newtab||{};
(function(a,f){a.extend(f,{getUserThemePreferences:function(a){var b=this.getActiveContent().plugin.id;window.service("themes",function(c){c.get(b,function(c){var h=["illumination","luminance","background","pattern","cover-image"],g={},f;for(f in h){var k=h[f];g[k]=null!=c[k]?c[k]:config["theme."+k]}g.id=b;a(g)})})},showTheme:function(){f.getUserThemePreferences(function(e){e.illumination?a("#newtab").addClass("theme_style-illumination"):a("#newtab").removeClass("theme_style-illumination");"light"==
e.luminance?a("#newtab").removeClass("theme_style-dark").addClass("theme_style-light"):a("#newtab").removeClass("theme_style-light").addClass("theme_style-dark");"black"==e.mono?a("#newtab").removeClass("theme_style-monowhite").addClass("theme_style-monoblack"):"white"==e.mono?a("#newtab").removeClass("theme_style-monoblack").addClass("theme_style-monowhite"):a("#newtab").removeClass("theme_style-monoblack").removeClass("theme_style-monowhite");null!=e["cover-image"]&&e["cover-image"]?(utils.id(),
e=utils.getFileURL("general/"+e["cover-image"]),a("#main-zone").css({"background-image":"url("+e+")","background-color":"white","background-position":"center","background-size":"cover"})):(a("#main-zone").css("background",""),f.setClassState("theme",e.background))})}})})(jQuery,window.newtab);
var SEARCH_ENGINES={google:{ShortName:"Google",LongName:"Google Search",Image:"data:image/png;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs9Pt8xetPtu9FsfFNtu%2BTzvb2%2B%2Fne4dFJeBw0egA%2FfAJAfAA8ewBBegAAAAD%2B%2FPtft98Mp%2BwWsfAVsvEbs%2FQeqvF8xO7%2F%2F%2F63yqkxdgM7gwE%2FggM%2BfQA%2BegBDeQDe7PIbotgQufcMufEPtfIPsvAbs%2FQvq%2Bfz%2Bf%2F%2B%2B%2FZKhR05hgBBhQI8hgBAgAI9ewD0%2B%2Fg3pswAtO8Cxf4Kw%2FsJvvYAqupKsNv%2B%2Fv7%2F%2FP5VkSU0iQA7jQA9hgBDgQU%2BfQH%2F%2Ff%2FQ6fM4sM4KsN8AteMCruIqqdbZ7PH8%2Fv%2Fg6Nc%2Fhg05kAA8jAM9iQI%2BhQA%2BgQDQu6b97uv%2F%2F%2F7V8Pqw3eiWz97q8%2Ff%2F%2F%2F%2F7%2FPptpkkqjQE4kwA7kAA5iwI8iAA8hQCOSSKdXjiyflbAkG7u2s%2F%2B%2F%2F39%2F%2F7r8utrqEYtjQE8lgA7kwA7kwA9jwA9igA9hACiWSekVRyeSgiYSBHx6N%2F%2B%2Fv7k7OFRmiYtlAA5lwI7lwI4lAA7kgI9jwE9iwI4iQCoVhWcTxCmb0K%2BooT8%2Fv%2F7%2F%2F%2FJ2r8fdwI1mwA3mQA3mgA8lAE8lAE4jwA9iwE%2BhwGfXifWvqz%2B%2Ff%2F58u%2Fev6Dt4tr%2B%2F%2F2ZuIUsggA7mgM6mAM3lgA5lgA6kQE%2FkwBChwHt4dv%2F%2F%2F728ei1bCi7VAC5XQ7kz7n%2F%2F%2F6bsZkgcB03lQA9lgM7kwA2iQktZToPK4r9%2F%2F%2F9%2F%2F%2FSqYK5UwDKZAS9WALIkFn%2B%2F%2F3%2F%2BP8oKccGGcIRJrERILYFEMwAAuEAAdX%2F%2Ff7%2F%2FP%2B%2BfDvGXQLIZgLEWgLOjlf7%2F%2F%2F%2F%2F%2F9QU90EAPQAAf8DAP0AAfMAAOUDAtr%2F%2F%2F%2F7%2B%2Fu2bCTIYwDPZgDBWQDSr4P%2F%2Fv%2F%2F%2FP5GRuABAPkAA%2FwBAfkDAPAAAesAAN%2F%2F%2B%2Fz%2F%2F%2F64g1C5VwDMYwK8Yg7y5tz8%2Fv%2FV1PYKDOcAAP0DAf4AAf0AAfYEAOwAAuAAAAD%2F%2FPvi28ymXyChTATRrIb8%2F%2F3v8fk6P8MAAdUCAvoAAP0CAP0AAfYAAO4AAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAA",InputEncoding:"UTF-8",
SearchUrl:"http://www.google.com/search?sourceid=chrome&ie=utf-8&oe=utf-8&aq=t&hl={lang}&q={searchTerms}",SuggestUrl:"http://www.google.com/complete/search?client=firefox&ie=utf-8&oe=utf-8&hl={lang}&gl={country}&q={searchTerms}",SearchForm:"https://www.google.com/"},yahoo:{ShortName:"Yahoo",LongName:"Yahoo Search",Image:"data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbgJqAIoCdgCaAnoAnhKCAKYijgCuLpIAskKeALpSpgC+Yq4AzHy8ANqezgDmvt4A7tLqAPz5+wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKlRFIoABWAKERERE6ADcKMzzu2hOgAAhERK8REWCWBERE36ERMHMEREvo6iEgY6hEn6Pu0mAzqkz/xjMzoDNwpERERDoAMzAKlERIoAAzMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AADAOQAAgBkAAAAPAAAACQAAAAkAAAAIAAAACAAAAAgAAIAYAADAOAAA//8AAP//AAD//wAA",
InputEncoding:"UTF-8",SearchUrl:"http://search.yahoo.com/search/?ei=UTF-8&p={searchTerms}",SuggestUrl:"http://ff.search.yahoo.com/gossip?output=fxjson&command={searchTerms}",SearchForm:"http://search.yahoo.com/"},bing:{ShortName:"Bing",LongName:"Bing. Search by Microsoft!",Image:"data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAVpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8ysf97zf+24//F6f/F6f/F6f+K0/9QvP8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8krP+Z2P/////////w+f/F6f/F6f/i9P/////////T7v9Bt/8Vpv8Vpv8Vpv8Vpv/T7v/////w+f97zf8Vpv8Vpv8Vpv8Vpv9QvP/T7v/////w+f9Bt/8Vpv8Vpv97zf////////9QvP8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8krP/i9P/////i9P8Vpv8Vpv+24//////i9P8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv+K0/////////8Vpv8Vpv/F6f////////8krP8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv+n3v/////w+f8Vpv8Vpv/F6f////////+n3v8krP8Vpv8Vpv8Vpv8Vpv8Vpv9tx/////////+Z2P8Vpv8Vpv/F6f/////////////i9P+K0/9QvP9QvP9tx//F6f////////+n3v8Vpv8Vpv8Vpv/F6f/////T7v+Z2P/i9P////////////////////+24/9QvP8Vpv8Vpv8Vpv8Vpv/F6f/////F6f8Vpv8Vpv8krP9QvP9QvP9Bt/8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv/F6f/////F6f8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv9Bt/9QvP9Bt/8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8Vpv8AAHBsAABhdAAAbiAAAHJ0AABsaQAAdGkAACBDAABlbgAAUEEAAEVYAAAuQwAAOy4AAEU7AABBVAAAQ00AAC5W",
InputEncoding:"UTF-8",SearchUrl:"http://www.bing.com/search/?q={searchTerms}",SuggestUrl:"http://api.bing.com/osjson.aspx?query={searchTerms}&language={lang}",SearchForm:"http://www.bing.com/search"},youtube:{ShortName:"Youtube",LongName:"Youtube",Image:"data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAQAQAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgNkQkIDZGiCA2RzAgNkcwIDZH/CA2R/wgNkf8IDZH/CA2R/wgNkf8IDZH/CA2R2AgNkcwIDZHMCA2RhAgNkQYIDpWHCA6V/wgOlf8IDpX/CA6V/wgOlf8IDpX/CA6V/wgOlf8IDpX/CA6V/wgOlf8IDpX/CA6V/wgOlf8IDpWHCQ6ZzAkOmf8JDpn/CQ6Z/wkOmf8JDpb/BQhc/wgMgf8JDpn/CQ6Z/wkOmf8JDpn/CQ6Z/wkOmf8JDpn/CQ6ZzAkOnuoJDp7/CQ6e/wkOnv8JDp7/Exed/8jIy/9RU4j/Bwp0/wkOm/8JDp7/CQ6e/wkOnv8JDp7/CQ6e/wkOnuoJD6T8CQ+k/wkPpP8JD6T/CQ+k/xUbo//V1dX/1dXV/4yNrP8QFG//CA6Y/wkPpP8JD6T/CQ+k/wkPpP8JD6T8CQ+q/wkPqv8JD6r/CQ+q/wkPqv8WG6n/3d3d/93d3f/d3d3/v7/M/y0wjv8JD6r/CQ+q/wkPqv8JD6r/CQ+q/woQr/8KEK//ChCv/woQr/8KEK//Fx2v/+fn5//n5+f/5+fn/+jo6P+YmtP/ChCv/woQr/8KEK//ChCv/woQr/8KELX8ChC1/woQtf8KELX/ChC1/xgdtf/x8fH/8fHx//Ly8v+bndv/Ehi3/woQtf8KELX/ChC1/woQtf8KELX8ChG76goRu/8KEbv/ChG7/woRu/8YH77/+fn5/+/v9/9fY9H/ChG7/woRu/8KEbv/ChG7/woRu/8KEbv/ChG76goRwMwKEcD/ChHA/woRwP8KEcD/EBfB/6Ol5/8tM8n/ChHA/woRwP8KEcD/ChHA/woRwP8KEcD/ChHA/woRwMwLEcSHCxHE/wsRxP8LEcT/CxHE/wsRxP8LEcT/CxHE/wsRxP8LEcT/CxHE/wsRxP8LEcT/CxHE/wsRxP8LEcSHCxLICQsSyKULEsjMCxLI+QsSyP8LEsj/CxLI/wsSyP8LEsj/CxLI/wsSyP8LEsj/CxLI0gsSyMwLEsiiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAD//wAA//8AAA==",
InputEncoding:"UTF-8",SuggestUrl:"http://www.google.com/complete/search?client=firefox&ds=yt&ie=utf-8&oe=utf-8&hl={lang}&gl={country}&q={searchTerms}",SearchUrl:"http://www.youtube.com/results?search_query={searchTerms}",SearchForm:"http://www.youtube.com"},wikipedia:{ShortName:"Wikipedia (en)",LongName:"Wikipedia, the free encyclopedia",Image:"data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAEAgQAhIOEAMjHyABIR0gA6ejpAGlqaQCpqKkAKCgoAPz9%2FAAZGBkAmJiYANjZ2ABXWFcAent6ALm6uQA8OjwAiIiIiIiIiIiIiI4oiL6IiIiIgzuIV4iIiIhndo53KIiIiB%2FWvXoYiIiIfEZfWBSIiIEGi%2FfoqoiIgzuL84i9iIjpGIoMiEHoiMkos3FojmiLlUipYliEWIF%2BiDe0GoRa7D6GPbjcu1yIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
InputEncoding:"UTF-8",SuggestUrl:"http://en.wikipedia.org/w/api.php/?action=opensearch&search={searchTerms}",SearchUrl:"http://en.wikipedia.org/wiki/Special:Search/?search={searchTerms}",SearchForm:"http://en.wikipedia.org/wiki/Special:Search"},twitter:{ShortName:"Twitter",LongName:"Realtime Twitter Search",Image:"data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A/v7+D/7+/j/+/v5g/v7+YP7+/mD+/v5I/v7+KP///wD///8A////AP///wD///8A////AP///wD+/v4H/v7+UPbv4pHgx47B1K9Y3tWwWN7Ur1je3sKCx+rbuKj+/v5n/v7+GP///wD///8A////AP///wD+/v4Y+fbweM2ycMe2iB7/vI0f/8STIf/KlyL/zJki/8yZIv/LmCL/0ahK5/Hp1JH+/v4Y////AP///wD///8A7OTTaquHN+CujkXPs5ZTv6N6G/+2iB7/xpUh/8yZIv/MmSL/zJki/8yZIv/Kmy738OjUi////wD///8A////AMKtfY7w6+Ef////AP///wD///8A3sqbp8iWIf/MmSL/zJki/8yZIv/MmSL/y5gi/8mePO7+/v4w////AP///wD///8A////AP///wD+/v4H/v7+V9CtWN3KmCL/zJki/8yZIv/MmSL/zJki/8yZIv/JlyH/5tSqp/7+/mD+/v4/////AP///wD///8A+PXvJtGyZdXNnS/3y5gi/8qYIv/LmCL/zJki/8yZIv/MmSL/y5gi/82iPO7LqVfe0byMmf///wD///8A/v7+D/Do1JHKmy73ypci/8KSIP+/jyD/xpQh/8uYIv/MmSL/zJki/8qYIv+/jyD/rIEd/9nKqH7///8A////APPu4TzAlSz3wZEg/7mLH/+sgR3/uZdGz7mLH//JlyH/zJki/8yZIv/GlSH/to0r9eXbxD/Vx6dg////AP7+/h/p38WhtIsq9al/HP+kfyjuybaKgf///wCzjzjlwJAg/8qYIv/JlyH/u4wf/8CkYrn///8A////AP///wDj2sRMnHUa/7meYa7Vx6dg////AP///wD///8A2MmnYK6DHf++jiD/vo4g/62CHf/k2sQ/////AP///wD///8A8OvhH/f07w////8A////AP///wD///8A////AP///wC/p3Cfpnwc/66GKvPg1LZ8////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////ANXHp2DJtoqByLWKgf///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AADgPwAAwA8AAIAHAAB4BwAA+AMAAPAAAADgAQAA4AMAAMEDAADPhwAA/48AAP/nAAD//wAA//8AAA==",
InputEncoding:"UTF-8",SearchUrl:"http://twitter.com/search/{searchTerms}",SearchForm:"http://twitter.com/search/"},amazon:{ShortName:"Amazon.com",LongName:"Amazon.com Search",Image:"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHgSURBVHjalFM9TNtQEP4cB7PwM1RITUXIgsRaYEEVEyKZwhiyZAQyd0BhpFOlIjoBqhjSqVQMoVMLLAjEwECCQJkSkBqJYDOAFOMKFSf28d7DTUxiUDnp/Pzeu/vuu7t3ICKF6SLTMv2/lB0fRWKfjwDm4JJisYh0Oo3fpZLYT0SjSCQS8JAFMADNDZ3NZsnf1taiqVTKi4nGASruk5lkkmTmMB6JUKFQqO+DfX1eABWeQoVR6f7HSdM0obqu48Yw8G1tDT82NsRd1TSbU9BbGPCog8PDj+jLzurFoAVgMh4XxoNDQ6SqKi0tL9eBvAB8zZwymYxYY7EYAoEA8vm82BNTg6XUIs0MeGTZoR1mhXSnwNl4pmAbjU7mcjkKhkL1ynMnntZ4OEw3VyrV8utk7s5TdW++0QXz+1i3P7IK36t+PCfVn1OQOoOA0gXr5DPak+cPXbBK+/T3S69AtY3LJ98vZ1or/iLr+pTuvr59/A6s003UdqZFJF/PCKQ3o5CUznoBST2AfbEF/9iqYEDaIfwj73VJPEfgNTe0tWNYR0uwy9uOW0OkrgHI7z5ADo2C7v48nLV3XHKAT+x/1m1sX58xsBxg8rZJrDYD8DHHp4aJj/MK09sXjPOt46PcCzAACXY8/u34wN0AAAAASUVORK5CYII=",
InputEncoding:"ISO-8859-1",SearchUrl:"http://www.amazon.com/exec/obidos/external-search/?field-keywords={searchTerms}",SearchForm:"http://www.amazon.com/"},ebay:{ShortName:"eBay",LongName:"eBay - Online auctions",Image:"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABFUlEQVQ4jdWTvUoDQRSFvxUfQMFSyBvYpLGSSWFpncY6lsLWFiupBBtLBRsfQcQ2a782PoCkSrONlUGy5LPYn6wbu4DghcOcYs65595hIpVNamsj9V8ajOeFzgsFLmo+LxTXcWJVX8WyppIgKSVPkQQ/F0u3gSFwBfTqdoPoBYDnxRFcDgA4Z4cbPtazqblZptBgxJ2BtGydv+vbkyahSUGC0zxT7VeZ0DguBXFsRs9AKtzq/amOKA2sTAylzMDKoIM6wfXhcWmcBKd51ukeWq8Qx6V0MmFAuppxdx/OIgB6e/32+SoTUGfdHTxy0CRodtF6jZpW2R2qs/alQNrgYTytR8Cf1Rh08VuNGkECJCtd5L//TN/BEWxoE8dlIQAAAABJRU5ErkJggg==",
InputEncoding:"ISO-8859-1",SuggestUrl:"http://anywhere.ebay.com/services/suggest/?s=0&q={searchTerms}",SearchUrl:"http://www.ebay.com/sch/i.html?_nkw={searchTerms}",SearchForm:"http://www.ebay.com/sch/allcategories/all-categories/"},gtranslate:{ShortName:"Google Translate",Image:"data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALFYAf8AAAAA4KEq/9+bH//fmx//35sf/9+bH//Wlh7/1pYe/9aWHv8AAAAAAAAAAAAAAADDZAL/w2QC/8NkAv+xWAH/sVgB/9GNB//RjQf/5JoJ/+SaCf/kmgn/0Y0H/9GNB//RjQf/0Y0H/wAAAADDZAL/w2QC/8NkAv+xWAH/sVgB/7FYAf+xWAH/zt3e/9KkRf/kmgn/5JoJ/+SaCf/Bysf/wcrH/9GNB/8AAAAAw2QC/9xzBP/DZAL/w2QC/7FYAf+xWAH/9btM/87d3v/Pyq3/0qRF/9KkRf/PuH//ytTP/8+4f//RjQf/AAAAANxzBP/ccwT/3HME/wAAAACxWAH/+qkS//qpEv/K1M//1OLk/87d3v/O3d7/zt3e/8rUz//goSr/0Y0H/9xzBP/ccwT/3HME/9xzBP/ccwT/1eXn//+2MP//tjD/7c2K/9Ti5P/PuH//9btM/87d3v/Pyq3/5JoJ/+SaCf/Y5un/3HME/9xzBP/ccwT/1OLk/9Ti5P//tjD//7Yw//W7TP/V5ef/z8qt/+3Niv/O3d7/9btM/+SaCf/kmgn/2Obp/8rUz//ccwT/wcrH/6+6uv/K1M///8JX//W7TP/1u0z/5Ny9/9jm6f/K1M//zt3e//qpEv/6qRL/5JoJ/9/r7f/f6+3/zt3e/3N8ef9aYl7/WmJe///CV///wlf//8JX/+3Niv/Y5un/1eXn/+3Niv/6qRL/+qkS/+SaCf/f6+3/3+vt/9/r7f+vurr/WmJe/1piXv//ynD//8pw///KcP//wlf/5Ny9/+Tcvf/1u0z/+qkS//qpEv/6qRL/3+vt/9/r7f/f6+3/WmJe/3N8ef+UnZv/7c2K///KcP//ynD//8pw///CV//1u0z//7Yw//qpEv/6qRL/+qkS/+v09v/r9Pb/wcrH/1piXv/K1M//1OLk/4mBaf//ynD//8pw///KcP//wlf/9btM//+2MP/6qRL/+qkS/wAAAADr9Pb/lJ2b/3N8ef9aYl7/c3x5/3N8ef9aYl7/WmJe/3N8ef/U4uT/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6/T2/5Sdm/9zfHn/c3x5/1piXv9aYl7/c3x5/3N8ef9zfHn/1OLk/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOv09v/r9Pb/6/T2/+v09v+vurr/lJ2b/9/r7f/f6+3/2Obp/9Xl5/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6/T2/+v09v/r9Pb/6/T2/9/r7f/f6+3/3+vt/9jm6f8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+gEAAMAAAACAAAAAgAAAAIgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAD8AAAA/AAAAP///gH///w==",
SearchUrl:"http://translate.google.com/?source=osdd#auto|auto|{searchTerms}"}};
(function(a){function f(a,b){var c=a,e;for(e in b)c=c.replace(RegExp("\\{"+e+"\\}","gi"),b[e]);return c}function e(){var b=document.querySelector("#search-input").value;if(""!=b&&null!=b){a("#search-suggestion-pad").remove();var e=utils.locale(),e=e.replace("_","-");if(0<b.trim().length||null==c.SearchForm)var b=encodeURIComponent(b),g=f(c.SearchUrl,{searchTerms:b,lang:e});else g=c.SearchForm;trackLifeCycleEvent("search-query",user.itag);trackStatusEvent("search-query");if(config.smethod)switch(config.smethod){case 1:a("#main-zone").fadeOut(150);
a("#top-bar ul").fadeOut(150);a("#search-button").fadeOut(150);a("#search-area").fadeOut();a("#search-area").css("background","white");a("#search-area").css("box-shadow","none");setTimeout(function(){a(document.body).append('<iframe frameBorder="0" id="a" style="position:absolute;top:0px;width:100%;height:100%;"/>');var c=utils.getPage("newtab/search")+"?q="+b+"&href="+encodeURIComponent(g);a("iframe#a").load(function(){a(this).css("position","relative");a("#newtab").remove()});a("iframe#a").attr("src",
c)},150);break;case 2:window.open(g,"_blank");break;default:setTimeout(function(){document.location.href=g},50)}else setTimeout(function(){document.location.href=g},50)}}utils.isz()&&(user["show.top-search"]=!0);var b=function(){var a=config.surl;try{a=urls.buildURL(a),""==user.cd&&(a+="&x="+user["general.guid"])}catch(b){console.log(b)}return{ShortName:utils.getMessage("Web"),LongName:config.stitle,Image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAABMJJREFUOMud1EtsVFUcx/HfOfcxd2ZgZu50WkqBvqy8NMaCiZogxKhAtSiFWIxgiCsXLmRhoibGuNAYMJqY4EI3GIIJRGp5SAJtEKxiFYoKtfRJm9L3DDPtTO/cO/d1/i4MiVgg1u/qrD6L3zk5DP9qcKAXjDFpcHiieDpnVDqumwCRYBBJSfjD8Ow0GBONO3fhXrFbh67OqzhwtBUNGx+PjU6l1+dMZ6Ng8mpJViOccx/Cnyav0Em20TqTmmgvXVY1u+vlxrvCMgCMj9xA2bJynP3+fKJ7cHynLXhjLFG6NJ4o4cHQAsEl7nuuGzdy2Uojk1zr+zjSffW3o0SU3lK3Cd+dbpkLExFOn2lB+88Xgteujz6XNtkLVTX3R6uqKiw1ECTGuACDxyC8oniRyOmJeEpRd1jmrLmlbtM369Y/WbgTzH84fw6fHzqJkbHJ5RnDfjqyqBwV1dV5LRgywVieCAYJGETISzKf1fVYZnF5jVZaVvlszfJVK9965+07TzGdmcGHrzdKv14behhKOFZStiwDLjt5W5BHzCWCzwBP4vBlRqRwYlpoQUhPlBXr8cSasCZfKy0pcSaTydthI2+gfyiv2Y63JFwUswJaOFdwyeYcnIERZ0ScwWMMPoF8n4g4g6VpYUkLhioqq6rDAJ8Lm/k8CsKTiGlKOBQ0QwFuRwJsoSIxmQAXgH/r+TDGGAcYODFbkYkzFuJcVoWguVPYVgHCsTwlEjA0GZ7MqCAxMmXOFAG4RHAB8jngMxAxRowRNPIcYVr5QjaX9Rn43Muz8gbGhwdt4drDzDFJhuOA/CxnwpI52QonW+EoyJwKMidbBrnM85CdTtLkxPjIyOi4OZVKzYWzMzNYv3WHn89l/yxkb+bInNY4I4OD8ionV5XgqRJ5qkRC4UQygVmz09rQUM9MX19vJwDLtu05sNTR3o7Fi4qRnByfDaiqpip8VTQa8YKaZqgyhypzKBIjiQFcEDez2VhP12W97adzba0tLWfr6jYXenp758IegN6uqzj09RH/eHPTBOMs6DnWCoVD0zTVUSVODL7kmKY2OTZSMjzU+2BmJh1NpzPftf3Y1qnHi2l09MZcGABM20VPdyc2bq4vXPzlwqBpGDOZ9M1YOjWVmBwbiQwPXQ93d3XKv1++mMlmp6HrRSuWlFUojz36RNeBr77IPPPUZgwODdz5E7rVkkQxfCF47draWFEisVSR1YTjOvxmOp0dGxudaNi2PVFeXvl+LFa0znPFwYGBwU/ffe/N0efrt+PkqW/vDt+rvXv3IabHOYOo17TQR7FIvNgwrC/7+/r2b9iwYbK5uRmf7f/471cxH7i0dBHCIU2EQqHzQngHLTvP43r01erq+145fuJEdPXqB27f+L927Ngx7N69G9PprB2NRkYdx17KJf6Irus1WiCY+uPKlf6XXtzl5maN+cEAcPjwYezZ8wbqt9Rn+/r6kwXLXKUFAg/pelGFoqjDra1nBtfUrhXzhgFg6/YGDPT1IxAITLmeZ1kFszaycMHKUCgYNc18x75PPkjL/wfetrUBANDU1OSoqnLKNM1lydTUa8IX0ZwxozPG5j/FP9OCGkqLS20uS0OpVHKiq6ur49Klix1jY2P5vwClQGKkoKCjnAAAAABJRU5ErkJggg==",
InputEncoding:"UTF-8",SearchUrl:a,SuggestUrl:"http://www.google.com/complete/search?client=firefox&ie=utf-8&oe=utf-8&hl={lang}&gl={country}&q={searchTerms}"}}(),c=null;a(document).ready(function(){function d(d){d=SEARCH_ENGINES[d];null==d&&(d=b);var e=d.Image;c=d;var f=null==d.LongName?d.ShortName:d.LongName;null==f&&(f="");a("#search-input").attr("placeholder",f);a("#search-engine-item-icon").css("background-image","url("+e+")");try{null!=window.autoSuggest&&window.autoSuggest.setSuggestUrl(d.SuggestUrl)}catch(k){}}
a("#search-input").focus();utils.isz()?c=b:(a("#search-suggestion-pad").css("margin-left","-52px"),a("#search-engine-select").css("display","inline-block"),a("#search-input").addClass("custom"),d(user.se),a(this).click(function(){a("#search-engine-list").empty().hide();a("#search-engine-select").removeClass("active")}),a("#search-engine-select").click(function(){if(0<a("#search-engine-list").children().length)a("#search-engine-list").empty(),a(this).removeClass("active");else{var c=a('<li data-name=""><img src="'+
b.Image+'" width="16px" height="16px"><span>'+b.ShortName+"</span></li>");a("#search-engine-list").append(c);for(var d in SEARCH_ENGINES)c=SEARCH_ENGINES[d],c=a('<li data-name="'+d+'"><img src="'+c.Image+'" width="16px" height="16px"><span>'+c.ShortName+"</span></li>"),a("#search-engine-list").append(c);a("#search-engine-list").show();a(this).addClass("active");return!1}}),a("#search-engine-list").on("click","li",function(){var b=a(this).data("name");user.se=b;d(b)}));13<config.sfontsize&&a("#search-input").css("font-size",
config.sfontsize);(function(){a("#search-button").click(e);a("#search-input").keyup(function(a){13!=a.keyCode&&13!=a.which||e.call(this)})})();(function(){var a=document.getElementById("search-input");window.autoSuggest=new AutoSuggest(a,c.SuggestUrl,e)})()})})(jQuery);window.newtab=window.newtab||{};(function(a,f){a.extend(f,{subscribe:function(a){service("favorites",function(b){b.subscribe(a)})}})})(jQuery,window.newtab);window.newtab=window.newtab||{};
(function(a,f){function e(b,c,d){var e=d.id;if(a(".plugin-content.list."+e).length)return a(".plugin-content.list."+e).remove(),!0;a(".plugin-content").remove();var f=d.hPos,g=d.vPos,h=a(b);d.items(function(b){for(var q in b)b[q].icon&&(b[q].favIconUrl="/skin/plugins/images/"+d.id+"/"+b[q].icon),b[q].context=b[q][d.context];0==b.length?b=a("<div><span>Empty</span></div>").addClass("empty"):(q=loadResource("/skin/newtab/resources/list.html","text"),b=a(Mustache.render(q,b)),a(".item > span",b).click(function(a){d.onClick(a,
this.dataset.context)}),d.header&&(a(".header",b).css("display","block"),a(".header > span",b).text(d.header).click(function(){d.onHeaderClick(c)})));b.addClass(g).addClass(f).addClass(e).addClass("plugin-content list");"right"==f?(q=a(window).width()-(h.offset().left+h.innerWidth()),b.css("right",q)):b.css("left",h.offset().left);a("body").append(b)})}function b(b){var c=h[this.dataset.plugin];switch(c.purpose){case "link":a(".plugin-content").remove();openByClick(b,this.dataset.href);break;case "list":e(this,
b,c);break;case "action":var f=c.id;if(a(".plugin-content.action."+f).length)a(".plugin-content.action."+f).remove();else if(a(".plugin-content").remove(),a.isFunction(c.onClick))c.onClick(b,c);break;case "content":user["general.content"]=c.id,d(c.id)}return!1}function c(c){var d=c.type.split("."),e=null,f=null,g=null;d[2]?(f=d[0],g=d[1],e=d[2]):d[1]?(e=d[1],d=d[0],"left"==d||"right"==d?(f="header",g=d):(g="left",f=d)):(f="header",g="left",e=d[0]);c.vPos=f;c.hPos=g;c.purpose=e;var d=c.id,h=i18n.translate("plugin_"+
c.id,c.title),r=c.tag?c.tag+" "+d:d;switch(f){case "header":var s=a('<li data-plugin="'+d+'" class="plugin-button header '+g+" "+e+" "+r+'"><span class="plugin-title">'+h+"</span>"+(c.color?'<div class="colorstrip" style="background-color:'+(c.color?c.color:"transparent")+'"></div>':"")+"</li>");k.append(s);break;case "footer":switch(e){case "link":s=a('<span data-plugin="'+d+'" data-href="'+(c.href?c.href:config["link."+d])+'" class="plugin-button footer '+g+" "+e+" "+r+'">'+h+"</span>");break;default:s=
a('<span data-plugin="'+d+'" class="plugin-button footer '+g+" "+e+" "+r+'">'+h+"</span>")}switch(g){case "left":p.append(s);break;case "right":n.append(s)}}s&&s.click(b)}function d(b){if(!r&&0!=g.length)if(s)utils.isFirstRun()||utils.isUpgradeRequired()||(s=!1,d(b));else{if(null!=l&&a.isFunction(l.plugin.onHide))try{l.plugin.onHide()}catch(c){console.log(c)}a("#content").empty();l=g[g[b]];l||(l=null==g["favorites-null"]?g[0]:g[g["favorites-null"]],b=l.plugin.id);a(".plugin-button.content").removeClass("selected");
a(".plugin-button.content."+b).addClass("selected");if(l){l.handler.init?(l.handler.init(),l.handler.init=!1):l.handler.reset();if(a.isFunction(l.plugin.onShow))l.plugin.onShow();f.showTheme()}}}var h={},g=[],l=null,k=null,n=null,p=null,m={},r=0,s=!0;a.extend(f,{setClassState:function(b,c){a("#newtab").removeClass(function(a,c){var d=c.match(RegExp(b+"-\\S+","g"));return d?d.join(" "):!1}).addClass(b+"-"+c)},showMenu:function(b,c){var d=b.items;if(0!=d.length){var e=b.id;if(a(".plugin-content.list."+
e).length)return a(".plugin-content.list."+e).remove(),!0;a(".plugin-content").remove();a(this);for(var f in d)d[f].icon&&(d[f].favIconUrl="/skin/plugins/images/"+b.id+"/"+d[f].icon);e=loadResource("/skin/newtab/resources/menu.html","text");d=a(Mustache.render(e,d));a(".item > span",d).click(function(a){b.onClick(this.dataset.id)});d.addClass("plugin-content list");d.css("left",c.pageX+"px");d.css("top",c.pageY+"px");a("body").append(d)}},initCSS:function(b){m[b]||(m[b]=!0,b="/skin/plugins/css/"+
b,a("head").append("<link rel='stylesheet' href='"+b+"''>"))},getResource:function(b,c){a.ajax({url:"/skin/plugins/resources/"+b,async:!0,dataType:"text"}).success(function(a){c(a)})},delayStartup:function(){r++},releaseStartup:function(){r--;r||a(function(){d(user["general.content"])})},showContent:function(a){d(a)},getActiveContent:function(a){return l},getContentHandler:function(a){return g[g[a]].handler},getPlugin:function(a){return h[a]},registerPlugin:function(b){if(b.type)switch(h[b.id]=b,
b.type){case "invisible":break;case "content":if(null!=b.content_model){var d=b.content_model;switch(d.type){case "TILES":d=new TilesContentHandler(b.id,d);break;case "SIMPLE":d=new SimpleContentHandler(b.id,d);break;default:return}}g[b.id]=g.length;g.push({plugin:b,handler:d});1<g.length&&(2==g.length&&a(function(){c(g[0].plugin)}),a(function(){c(b)}));break;default:a(function(){c(b)})}}});(function(){function b(){try{l&&l.handler.resize(!0)}catch(a){console.log(a)}new Date-c<e?setTimeout(b,e):d=
!1}var c=new Date,d=!1,e=10;a(window).resize(function(){c=new Date;!1===d&&(d=!0,setTimeout(b,e))})})();a(document).ready(function(){a(this).bind("contextmenu",function(b){f.showMenu({id:"newtab",onClick:function(b){switch(b){case "THEME":a(".plugin-button.action.theme").trigger("click");break;case "LAYOUT":a(".plugin-button.action.layout").trigger("click");break;case "ADD":a(".plugin-button.action.add").trigger("click")}},items:[{id:"ADD",title:"Add new Tile"},{separator:!0},{id:"THEME",title:"Theme"},
{id:"LAYOUT",title:"Layout"}]},b);return!1});a(this).click(function(){a(".plugin-content").remove()});k=a("#top-bar ul:first-child");n=a("#footer_right_area");p=a("#footer_left_area");setTimeout(function(){a("#search-area").addClass("delay-animation");a("#content-area").addClass("delay-animation");a("#main-zone").addClass("delay-animation");a("#top-bar").addClass("delay-animation")},500);user["show.top-search"]?a("#newtab").removeClass("search-area-close").addClass("search-area-open"):a("#newtab").removeClass("search-area-open").addClass("search-area-close");
d();var b=!1;a("#newtab").bind("mousewheel",function(c,d){if(!b){var e=0<c.originalEvent.wheelDelta?"<<":">>";if(">>"==e&&a("#content .paging-arrow.right-arrow").is(":visible")||"<<"==e&&a("#content .paging-arrow.left-arrow").is(":visible"))b=!0,l.handler.gotoPage(e,"sides",function(){b=!1})}return!1})})})(jQuery,window.newtab);
(function(a){newtab.registerPlugin({type:"header.right.action",tag:"icon",id:"edit",title:"Edit",onClick:function(f){service("favorites",function(e){e.getGroups(function(b){1<b.length?a(".plugin-button.action.delgroup").show():a(".plugin-button.action.delgroup").hide();a("#newtab").toggleClass("edit-mode").toggleClass("work-mode")})})}})})(jQuery);
(function(a){function f(){newtab.getActiveContent().handler.refresh()}function e(b,c){a(".layout-setting."+b).each(function(){this.dataset[b]==c&&a(this).addClass("selected")})}function b(b){a(".layout-setting."+b+".selected").removeClass("selected");a(this).addClass("selected");var c=this.dataset[b];switch(this.dataset.datatype){case "int":c=parseInt(c);break;case "float":c=parseFloat(c)}service("layouts",function(a){var d=newtab.getActiveContent().plugin.id,e={};e[b]=c;trackEvent("Layout",b,c);
a.update(d,e,f)});return!1}function c(c){a(".layout-setting."+c).click(function(a){b.call(this,c)})}function d(b,d){newtab.initCSS("layout.css");newtab.getResource("layout.html",function(l){newtab.getUserLayoutPreferences(function(k){var n=a(l);i18n.template(n);n.addClass("plugin-content action "+d.id);a("body").append(n);a("#layout-box").css("visibility","visible").hide().fadeIn("fast");a("#layout-3D").get(0).checked=k["3D"];a("#show-titles").get(0).checked=k.show_titles;var n=["prop","size","spacing",
"num_of_cols"],p;for(p in n){var m=n[p];e(m,k[m]);c(m)}a("#layout-box").click(function(b){"INPUT"==b.target.tagName||"LABEL"==b.target.tagName?(b.stopPropagation(),service("layouts",function(c){var d=newtab.getActiveContent().plugin.id;if("layout-3D"==b.target.id){var e=a("#layout-3D").get(0).checked;c.update(d,{"3D":e},f);trackEvent("Layout","3D",e?"set":"unset")}else"show-titles"==b.target.id&&(e=a("#show-titles").get(0).checked,c.update(d,{show_titles:e},f),trackEvent("Layout","titles",e?"set":
"unset"))})):b.stopPropagation()});k=a(b.target);a("#layout-box").css("right",15);a("#layout-box").css("top",k.offset().top+k.height()+38);a("#layout-box .close-button").click(function(){a("#layout-box").fadeOut("fast",function(){a(this).remove()});return!1})})})}newtab.registerPlugin({type:"header.right.action",tag:"icon",id:"layout",title:"Layout",onClick:function(a,b){d(a,b)}})})(jQuery);
(function(a){function f(b){newtab.getUserThemePreferences(function(c){newtab.initCSS("theme.css");newtab.getResource("theme.html",function(d){d=a(d);i18n.template(d);d.addClass("plugin-content action "+e.id);a("body").append(d);a("#theme_style-illumination").get(0).checked=c.illumination;a(".theme-preview").css("display","none");a(".theme-preview.set-A").addClass("visible").css("display","");a(".background-set.set-A").addClass("selected");a(".background-set").click(function(){var b=this.dataset.set;
a(".background-set.selected").removeClass("selected");a(".background-set.set-"+b).addClass("selected");a(".theme-preview.visible").hide();a(".theme-preview.set-"+b).addClass("visible").show()});a("#theme-box").css("visibility","visible").hide().fadeIn("fast");a("#theme-box").click(function(b){var c=newtab.getActiveContent().plugin.id;if("INPUT"==b.target.tagName||"LABEL"==b.target.tagName){if(b.stopPropagation(),"theme_style-illumination"==b.target.id){var d=a("#theme_style-illumination").get(0).checked;
trackUserEvent("Theme-setting","illumination",d?"set":"unset");service("themes",function(a){a.update(c,{illumination:d},function(){newtab.showTheme()})})}}else b.stopPropagation()});d=a(b.target);a("#theme-box").css("right",15);a("#theme-box").css("top",d.offset().top+d.height()+38);a(".theme-preview").click(function(){var b=this,c=newtab.getActiveContent().plugin.id,d=a(this).hasClass("light")?"light":"dark";service("themes",function(a){a.update(c,{luminance:d,background:b.dataset.theme,"cover-image":!1},
function(){newtab.showTheme();trackEvent("Theme",b.dataset.theme)})});return!1});a("#theme-box .close-button").click(function(){a("#theme-box").fadeOut("fast",function(){a(this).remove()});return!1});a("input[type=file]","#theme-box").click(function(a){a.stopPropagation()});a("input[type=file]","#theme-box").change(function(a){a=a.target.files;if(0!=a.length&&(a=a[0],a.type.match("image.*"))){var b=newtab.getActiveContent().plugin.id,c=new FileReader;c.onload=function(a){var c=a.target;2==c.readyState&&
(trackUserEvent("Theme-setting","cover-image"),service("themes",function(a){a.saveBackground(b,c.result,function(){a.update(b,{"cover-image":"cover_image."+b},function(){newtab.showTheme()})})}))};c.readAsDataURL(a)}});a("#theme-file").click(function(){a("input[type=file]","#theme-box").click();return!1})})})}var e={type:"header.right.action",tag:"icon",id:"theme",title:"Theme",onClick:function(a){f(a)}};newtab.registerPlugin(e)})(jQuery);
(function(a){newtab.registerPlugin({type:"header.left.action",tag:"icon "+(user["favorites.user-added"]?"":"not-added-yet"),id:"add",title:"Add",onClick:function(f){"webapps"==newtab.getActiveContent().plugin.id?window.location="https://chrome.google.com/webstore":(a(".favorites.balloon").remove(),user["favorites.user-added"]=!0,newtab.getPlugin("fav-add").add())}})})(jQuery);
(function(a){function f(){service("extensionUtils",function(a){a.getDetails(function(c){trackLifeCycleEvent("uninstall-dialog",user.itag);c=c.name;!0==confirm(c+"\nBy clicking OK, "+c+" will be removed from Firefox. ")&&(trackLifeCycleEvent("uninstall-direct",user.itag),setTimeout(function(){a.uninstall(function(){config.uninstall_url?window.open(config.uninstall_url,"_top"):window.open("about:home","_top")})},500))})})}try{newtab.registerPlugin({type:"footer.left.list",tag:"icon",id:"info",title:"Info",
items:function(a){var c=utils.isz()?config["info.links-1"]:config["info.links-0"],d=[],e;for(e in c){var f=i18n.translate("info_"+c[e],c[e]),l="link."+c[e].toLowerCase().replace(" ",""),k="link.rateus"==l?null:config[l];if(k){f={title:f,url:k};switch(l){case "link.facebook":f.icon="facebook.ico";break;case "link.twitter":f.icon="twitter.ico";break;case "link.rateus":f.icon="rateus.png";break;case "link.contactus":f.icon="contactus.png"}d.push(f)}}a(d)},context:"url",onClick:function(a,c){trackUserEvent("list-info",
c);"newtab://uninstall"==c?f():openByClick(a,c)}})}catch(e){}})(jQuery);
(function(a){function f(b,c){c="undefined"!==typeof c?c:!1;var d=a(".fav-link",b);if(c)var e="create",d={state:e,id:d.data("id"),url:d.data("url"),name:d.data("name"),hostname:d.data("hostname")};else e=d.data("state"),d={state:e,id:d.data("id"),url:d.data("url"),name:d.data("name"),hostname:d.data("hostname"),origin:d.data("origin"),mode:d.data("mode"),color:d.data("color"),thumb:d.data("thumb")};d["state-"+e]=!0;return d}function e(b,c){var d=a(".fav-link",b).data("id");c.remove(a(b));service("favorites",
function(a){a.remove(p,d)})}function b(a,b){newtab.getPlugin("fav-edit").edit(a,b)}function c(c,d,g){if(0<=["EDIT","DELETE"].indexOf(c))switch(c){case "EDIT":b(d,g);break;case "DELETE":e(d,g)}else{var h=f(d,!1),k=f(d,!0);switch(c){case "COVER":h.mode="cover";h["mode-cover"]=!0;g.update(a(d),h);service("favorites",function(a){a.update(p,k.id,{mode:"cover"})});break;case "CONTAIN":h.mode="contain";h["mode-contain"]=!0;g.update(a(d),h);service("favorites",function(a){a.update(p,k.id,{mode:"contain"})});
break;case "PAGE":g.update(a(d),k);service("favorites",function(a){a.update(p,k.id,{method:"page"})});break;case "LOGO":g.update(a(d),k);service("favorites",function(a){a.update(p,k.id,{method:"logo",altMethod:"icon"})});break;case "FILE":a("input[type=file]","#menu-input-file").click(),a("input[type=file]","#menu-input-file").change(function(b){a("#menu-input-file").remove();b=b.target.files;if(0!=b.length&&(b=b[0],b.type.match("image.*"))){var c=new FileReader;c.onload=function(b){var c=b.target;
2==c.readyState&&(g.update(a(d),k),service("favorites",function(a){a.update(p,k.id,{method:"file",origin:"user",mode:"contain",imgSrc:c.result})}))};c.readAsDataURL(b)}})}}}function d(b,d,e){if(a("#newtab").hasClass("edit-mode"))return a("#newtab").removeClass("edit-mode").addClass("work-mode"),!1;var f=a(".fav-link",d).data("origin"),g=a(".fav-link",d).data("mode"),h=a(".fav-link",d).data("state"),k=[{id:"EDIT",title:i18n.translate("edit","Edit")},{id:"DELETE",title:i18n.translate("delete","Delete")}];
if("ready"!=h)k.splice(2,7);else{k.push({separator:!0});i18n.translate("favadd_tooltip_screenshot","Take a Screenshot");h=i18n.translate("favadd_tooltip_makealogo","Make a logo");switch(f){case "page":k.push({id:"PAGE",title:"Reload Screenshot"});k.push({id:"LOGO",title:h});k.push({separator:!0});break;case "user":k.push({id:"LOGO",title:h}),k.push({separator:!0})}k.push({id:"FILE",title:i18n.translate("favadd_tooltip_imagefile","Set Custom Image")});if("user"==f)switch(g){case "cover":k.push({id:"CONTAIN",
title:i18n.translate("favadd_tooltip_containimage","Contain Image")});break;case "contain":k.push({id:"COVER",title:i18n.translate("favadd_tooltip_coverimage","Cover Image")})}}f={id:"favs",onClick:function(a){c(a,d,e)},items:k};0==a("#menu-input-file").length&&a("body").append('<form id="menu-input-file" style="display:none"><input style="display:none;" type="file"/></form>');newtab.showMenu(f,b);return!1}function h(b,c){var d=a(".fav-link",b).data("mode"),e=c?{width:c.width}:null;"icon"==d&&a(".something-else-semantic",
b).fitText(0.8,e)}function g(b,c){function d(){var e=200+200*h;k+=e;12E4<k||50<=h||(h++,setTimeout(function(){service("favorites",function(e){try{e.getTile(p,f,function(e){"create"!=e.state?("icon"!=e.mode&&(e.thumb=e.thumb+"?x="+(new Date).getTime()),c.update(a(b),e)):d()})}catch(g){console.log(g),d()}})},e))}var e=a(".fav-link",b);e.data("thumb");var f=e.data("id"),g=e.data("state"),h=0,k=0,l=a(".fav-icon",b);0<l.length&&setTimeout(function(){var a=e.data("hostname");l.css("background-image","url(https://plus.google.com/_/favicon?domain="+
a+")")},50);"create"==g&&d()}function l(b){function c(a){try{var b=/\{uref}/gi;a=a.replace(b,config.uref);b=/\{aflt}/gi;a=a.replace(b,user.aflt);b=/\{cd}/gi;a=a.replace(b,user.cd);b=/\{cr}/gi;a=a.replace(b,user.cr);b=/\{locale}/gi;a=a.replace(b,utils.locale());b=/\{lang}/gi;a=a.replace(b,utils.language())}catch(d){console.log(d)}return a}var d=a(".fav-link",b.currentTarget)[0].dataset.url;if(a("#newtab").hasClass("edit-mode"))a("#newtab").removeClass("edit-mode").addClass("work-mode");else{var e=
a(b.target).closest(".dhItem");if(!e.hasClass("dragging")){if(1==howToOpen(b)){e=a(b.target).closest(".dhItem");e.unbind().css("cursor","default");e.css("-webkit-transform","none");a(document).unbind();var f=a('<div style="position:absolute;z-index:10;top:0;left:0;width:100%;height:100%;background:black;opacity:0.65"></div>');a("#newtab").append(f);var f=a(e).offset(),g=0.33*a("body").innerHeight(),h=1.4*g;a("body").innerWidth();a("body").innerHeight();var k=f.left-(h-e.width())/2,l=f.top-(g-e.height())/
2;0>=k-20?k=20:k+h+20>a("body").innerWidth()&&(k=a("body").innerWidth()-h-20);0>=l-20?l=20:l+g+20>a("body").innerHeight()&&(l=a("body").innerHeight()-g-20);a(e).appendTo(a("body")).css({"z-index":1E3,left:f.left,top:f.top});setTimeout(function(){e.addClass("iframe");a(e).css({width:h,height:g,left:k,top:l})},0);setTimeout(function(){e.css({left:0,top:0,width:"100%",height:"100%"})},350)}try{var p=urls.getHostName(d,!0);trackUserEvent("favorite-open",p,null,!0);var m=document.createElement("a");m.href=
urls.ensureURL(d);if(""!=m.search||"/"!=m.pathname){setTimeout(function(){openByClick(b,d)},300);return}service("storage",function(a){a.get("redirects",function(a){var e=d;null!=a&&(a=a[p],null!=a&&(trackUserEvent("redirect-link",d,a),e=c(a)));setTimeout(function(){openByClick(b,e)},300)})})}catch(n){console.log(n)}return!1}}}a(document).ready(function(){});var k=function(a){this.group=a};k.prototype=function(){return{type:"TILES",style:function(){return"favorites"},template:function(a){return loadResource("/skin/plugins/resources/favorites.html",
"text")},items:function(b){var c=this.group.id;service("favorites",function(d){d.get(c,function(c){if(0==c.length)a(".plugin-button.header.action.add").addClass("not-added-yet").sdBalloon(i18n.translate("favadd_tooltip","Click on the + button and add your favorite sites"),{clazz:"favorites"}),b([]);else{user["favorites.user-added"]&&a(".plugin-button.header.action.add").removeClass("not-added-yet");for(var d=[],e=0;e<c.length;e++){var f=c[e];f&&d.push(f)}b(d)}})})},onMove:function(a,b){var c=this.group.id;
service("favorites",function(d){d.move(c,a.id,b)})},onReposition:function(a,b){h(a,b)},onDraw:function(c,f,k){a(c).click(l);a(c).bind("contextmenu",function(a){a.preventDefault();d(a,c,f);return!1});a(".fav-remove",c).click(function(a){e(c,f);return!1});a(".fav-edit",c).click(function(a){b(c,f);return!1});g(c,f);h(c,k)}}}();var n=function(a){this.group=a};n.prototype=function(){return{type:"TILES",style:function(){return"favorites"},template:function(a){return loadResource("/skin/plugins/resources/favorites.html",
"text")},items:function(b){var c=this.group.id;service("favorites",function(d){d.get(c,function(c){if(0==c.length)a(".plugin-button.header.action.add").hide(),b([]);else{for(var d=[],e=0;e<c.length;e++){var f=c[e];f&&d.push(f)}b(d)}})})},onMove:function(a,b){var c=this.group.id;service("favorites",function(d){d.move(c,a.id,b)})},onReposition:function(a,b){h(a,b)},onDraw:function(c,d,f){a(c).click(l);a(".fav-remove",c).click(e);a(".fav-edit",c).click(b);g(c,d);h(c,f)}}}();var p=null,m={type:"invisible",
id:"favorites",getActiveGroupId:function(){return p},addFavoritesGroupPlugin:function(b){var c={group:b,id:"favorites-"+b.id,type:"content",title:b.title,color:b.color,onShow:function(){p=this.group.id;if(a("#newtab").hasClass("edit-mode"))return newtab.getPlugin("group-edit").edit(c.group),!1},onHide:function(){a(".favorites.balloon").remove()},content_model:new k(b)};""==user["general.content"]&&(user["general.content"]=c.id);newtab.registerPlugin(c)},addSubscribedGroupPlugin:function(b){var c=
{group:b,id:"favorites-"+b.id,type:"content",title:b.title,color:b.color,onShow:function(){p=this.group.id;if(a("#newtab").hasClass("edit-mode"))return newtab.getPlugin("group-edit").edit(c.group),!1},onHide:function(){a(".favorites.balloon").remove()},content_model:new n(b)};""==user["general.content"]&&(user["general.content"]=c.id);newtab.registerPlugin(c)}};newtab.registerPlugin(m);newtab.delayStartup();service("favorites",function(a){a.getPubGroups(function(b){for(var c in b){var d=b[c];m.addSubscribedGroupPlugin({id:d.id,
title:d.title,color:d.color})}a.getGroups(function(a){for(var b in a)m.addFavoritesGroupPlugin(a[b]);newtab.releaseStartup()})})})})(jQuery);
(function(a){function f(a){return CryptoJS.MD5(a+(new Date).getTime()).toString()}function e(c){0<a("#modal-fav-add").length?a.isFunction(c)&&c():(newtab.initCSS("modal-fav-add.css"),setTimeout(function(){newtab.getResource("modal-fav-add.html",function(d){d=a(d);i18n.template(d);a("body").append(d);setTimeout(function(){a("#modal-fav-add").sdDialog("init",l,{open:function(){},show:function(){},hide:function(){},close:function(){null!=b&&service("browserUtils",function(a){a.cancelCaptureURL(b)});
a("#modal-fav-add").remove()}});a("#modal-fav-add .x-button").click(function(){a("#modal-fav-add").sdDialog("close")});a(".nav-form").click(function(){a(this).addClass("active");a(".nav-form").not(this).removeClass("active");var b=a(this).data("form");a("#modal-fav-add").sdDialog("show",b)});a("#make_screenshot").click(function(){a(this).is(":checked")?(a("#make_crop_label").css({cursor:"pointer",color:""}),a("#make_crop").removeAttr("disabled")):(a("#make_crop_label").css({cursor:"default",color:"lightgray"}),
a("#make_crop").attr("disabled","disabled"))});a("#site-url").keyup(function(b){""==a(this).val()||a(this).prop("disabled")?a("#modal-fav-add #submit").addClass("disabled"):a("#modal-fav-add #submit").removeClass("disabled")});a.isFunction(c)&&c()},0)})},0))}var b=null,c=function(){return{onClose:function(){},onShow:function(){a(".nav-button.selected").removeClass("selected");a(".goto-address-button").addClass("selected");a("#fav-url-form input").prop("disabled",0);a("#submit",this.id).css("disabled",
0);a("#site-url",this.id).prop("disabled",0).val("");a(".loader",this.id).css("display","none");a("#site-url").focus();a("#make_screenshot").prop("checked",user["favorites.screenshot"]);user["favorites.screenshot"]?(a("#make_crop_label").css({cursor:"pointer",color:""}),a("#make_crop").removeAttr("disabled"),a("#make_crop").prop("checked",user["favorites.crop"])):(a("#make_crop_label").css({cursor:"default",color:"lightgray"}),a("#make_crop").attr("disabled","disabled"))},onHide:function(){},onSubmit:function(c){function d(b){var c=
f(l);a("#modal-fav-add").sdDialog("close");b.addMany(k,[{type:"website",method:"logo",altMethod:e?"page":"icon",id:c,url:l,name:t}]);b.getTile(k,c,function(a){null==a&&(a=document.createElement("a"),a.href=l,a={id:c,url:l,name:t,hostname:a.hostname,state:"create","state-create":!0});n.append(a)})}c.preventDefault();c.stopPropagation();a("#fav-url-form .advance").css("visibility","hidden");a("#fav-url-form #site-url").attr("disabled","disabled");a("#modal-fav-add #add-sources").css("visibility","hidden");
var e=user["favorites.screenshot"]=a("#make_screenshot").is(":checked"),h=user["favorites.crop"]=a("#make_crop").is(":checked");if(""==a("#site-url").val()||a("#fav-url-form #submit").hasClass("disabled"))return a("#site-url").focus(),!1;c=a("#site-url").val();trackUserEvent("user-add",c,null,!0);var l=urls.hasProtocol(c)?c:urls.name2host(c),t=urls.url2name(c);service("favorites",function(c){e&&h?(a("#fav-url-form #fav-loader").show(),c.checkGallery(l,function(e,f){null!=e?setTimeout(function(){d(c)},
500):service("browserUtils",function(c){var d=urls.hasProtocol(l)?l:"http://"+l;b=c.captureURL({force:!0,url:d},function(c,d){null==d?(b=null,a("#modal-fav-add").length&&a("#modal-fav-add").sdDialog("close")):service("imagesUtils",function(b){b.crop(d,1.4,function(b){g.setDetails({url:l,name:t,rawImage:b});a("#modal-fav-add").length&&a("#modal-fav-add").sdDialog("show","screenshot")})})})})})):d(c)});return!1}}}(),d=function(){return{onClose:function(){},onShow:function(){a("#tabs-list").on("click",
"li",function(b){a("#modal-fav-add").sdDialog("close");var c=parseInt(b.currentTarget.getAttribute("data-tab-idx"));chrome.tabs.get(c,function(a){var b=a.title;a=a.url;var d=f(a),e={id:d,name:b,url:a,state:"create","state-create":!0},g={type:"website",id:d,url:a,name:b,method:"logo",altMethod:"tab",tabId:c};service("favorites",function(a){a.addMany(k,[g])});n.append(e)})});a(".nav-button.selected").removeClass("selected");a(".goto-tabs-button").addClass("selected");chrome.tabs.query({},function(b){var c=
a("<ul class='xxx4'>");Array.prototype.forEach.call(b,function(b,d){/http:\/\/|https:\/\//.test(b.url)&&a("<li>").attr("data-tab-idx",b.id).css("backgroundImage","url("+b.favIconUrl+")").text(b.title).appendTo(c)});a(".xxx4","#tabs-list").remove();a("#tabs-list").append(c)})},onHide:function(){a(".xxx4","#tabs-list").remove()},onSubmit:function(){}}}(),h=function(){return{onClose:function(){},onShow:function(){a("dd.nav-form").removeClass("active");a(a("dd.nav-form")[1]).addClass("active");0<a("iframe",
"#fav-gallery-form").length||a("<iframe>",{src:"gallery.html",frameborder:0}).appendTo("#fav-gallery-form")},onHide:function(){a("iframe","#fav-gallery-form").remove()}}}(),g=function(){var b,c,d;return{setDetails:function(a){b=a},onClose:function(){c=b=null;null!=d&&d.destroy()},onShow:function(){a("dl.sub-nav").hide();c=new Image;c.src=b.rawImage;a("#fav-screenshot-form #sc-image-area").empty().append(c);a(c).Jcrop({onSelect:function(){},bgColor:"black",boxWidth:a("#sc-image-area").width(),bgOpacity:0.8,
minSize:[80,80],setSelect:[200,200,450,450],aspectRatio:config["layout.prop"]},function(){d=this;setTimeout(function(){d.animateTo([0,0,160/0.66,160/0.66/1.4])},500);a(a(".jcrop-holder img","#fav-screenshot-form")[1]).addClass("grayFilter")})},onHide:function(){},onSubmit:function(e){e.preventDefault();e=d.tellSelect();e.x=parseInt(e.x);e.y=parseInt(e.y);e.w=parseInt(e.w);e.h=parseInt(e.h);0>e.y&&(e.y=0);0>e.x&&(e.x=0);var g=document.createElement("canvas");g.width=e.w;g.height=e.h;g.getContext("2d").drawImage(c,
e.x,e.y,e.w,e.h,0,0,e.w,e.h);var h=b.name,l=b.url,v=g.toDataURL("image/png"),u=f(l);a("#modal-fav-add").sdDialog("close");service("favorites",function(a){a.addMany(k,[{type:"website",method:"file",origin:"page",mode:"cover",imgSrc:v,id:u,url:l,name:h}]);a.getTile(k,u,function(a){null==a&&(a=document.createElement("a"),a.href=l,a={id:u,url:l,name:h,hostname:a.hostname,state:"create","state-create":!0});n.append(a)})});return!1}}}(),l={url:{id:"fav-url-form",handler:c},tabs:{id:"fav-tabs-form",handler:d},
gallery:{id:"fav-gallery-form",handler:h},screenshot:{id:"fav-screenshot-form",handler:g}};a(document).ready(function(){window.addEventListener("message",function(b){function c(){if(0!=e.length){var a=e.shift();n.append(a,function(){setTimeout(c,150)})}}if(b.origin==utils.getOrigin()||b.origin+"/"==utils.getOrigin()){var d=b.data.payload,e=[];switch(b.data.type){case "add":b=JSON.parse(d);for(var d=[],g=[],h=0;h<b.length;h++){var l=b[h],v=l.url,u=f(v),w={type:"website",id:u,url:v,name:l.name,method:"file",
mode:"contain",imgSrc:l.thumb,color:l.color};d.push({id:u,name:l.name,url:v,thumb:l.thumb,color:l.color,origin:"logo",state:"ready","state-ready":!0,mode:"contain","mode-contain":!0});g.push(w)}e=d.slice(0);setTimeout(c,0);service("favorites",function(a){a.addMany(k,g)});a("#modal-fav-add").sdDialog("close")}}},!1)});var k=null,n=null;newtab.registerPlugin({type:"invisible",id:"fav-add",getActiveGroupID:function(){return k},add:function(){k=newtab.getPlugin("favorites").getActiveGroupId();n=newtab.getContentHandler("favorites-"+
k);e(function(){a("#modal-fav-add").sdDialog("show","url")})}})})(jQuery);
(function(a){function f(b,c){newtab.initCSS("modal-fav-edit.css");newtab.getResource("modal-fav-edit.html",function(d){d=a(d);var e=a("<div>",{className:".modal"});a("body").append(e);i18n.template(d);e.append(d);a(".x-button").click(function(){e.sdModal("close")});a(".fav-input-name",e).val(b.name).focus();a(".fav-input-url",e).val(b.url);a(e,"form").submit(function(b){b.preventDefault();if(!a("input[type=submit]",this).hasClass("disabled")){b=a(".fav-input-name",this).val();var d=a(".fav-input-url",
this).val();c({name:b,url:d});e.sdModal("close")}return!1});e.sdModal("open",{close:function(){e.remove()}})})}function e(b,c){var d=a(".fav-link",b).data("id"),e=newtab.getPlugin("favorites").getActiveGroupId();service("favorites",function(g){g.getTile(e,d,function(l){f(l,function(f){if(f.url!=l.url)l.name=f.name,l.url=f.url,l.state="create",l["state-create"]=!0;else if(f.name!=l.name)l.name=f.name;else return;g.update(e,d,f,function(){c.update(a(b),l)})})})})}newtab.registerPlugin({type:"invisible",
id:"fav-edit",edit:function(a,c){e(a,c)}})})(jQuery);
(function(a){function f(e){newtab.initCSS("modal-fav-group.css");newtab.getResource("modal-fav-group.html",function(b){b=a(b);a("body").append(a("<div>",{id:"fav-group-dialog"}));i18n.template(b);a("#fav-group-dialog").append(b);null!=e&&a("#fav-group-dialog #save").removeClass("disabled").removeAttr("disabled");a("#fav-group-dialog #dialog-close").click(function(){a("#fav-group-dialog").sdModal("close")});a("#fav-group-dialog #group-name").focus().keyup(function(b){""==a(this).val()||a("#group-name").prop("disabled")?
a("#fav-group-dialog #save").addClass("disabled").attr("disabled","disabled"):a("#fav-group-dialog #save").removeClass("disabled").removeAttr("disabled")});null==e?(a("#fav-group-dialog #group-color > option"),Math.random(),a("#fav-group-dialog #group-color > option").attr("selected",!1).eq(0).attr("selected",!0),a('select[name="colorpicker-picker"]').simplecolorpicker({picker:!0})):(a("#fav-group-dialog #group-name").val(e.title),a("#fav-group-dialog #dialog-title").text(i18n.translate("favgrp_editgroup",
"Edit Group")),a('select[name="colorpicker-picker"]').simplecolorpicker({picker:!0}),a("#fav-group-dialog .simplecolorpicker").css("background-color",e.color),a("#fav-group-dialog #save").text(i18n.translate("favgrp_savegroup","Save")));a("#fav-group-dialog #fav-group-form").submit(function(){return!1});a("#fav-group-dialog #fav-group-form #save").click(function(b){if(!a(this).attr("disabled")){b.preventDefault();b.stopPropagation();var d=a("#group-name").val(),f=a("#fav-group-dialog .simplecolorpicker").css("background-color");
service("favorites",function(b){null==e?(b.createGroup(d,f,function(b){a("#newtab").removeClass("edit-mode").addClass("work-mode");a("#fav-group-dialog").sdModal("close");newtab.getPlugin("favorites").addFavoritesGroupPlugin(b);newtab.showContent("favorites-"+b.id)}),b=utils.locale(),trackUserEvent("group-add",b,d)):(b.updateGroup(e.id,d,f,function(b){b=a(".plugin-button.content.favorites-"+b.id);a(".plugin-title",b).text(d);a(".colorstrip",b).css("background-color",f);a("#newtab").removeClass("edit-mode").addClass("work-mode");
a("#fav-group-dialog").sdModal("close")}),b=utils.locale(),trackUserEvent("group-update",b,d))})}});a("#fav-group-dialog").sdModal("open",{close:function(){a("#fav-group-dialog").remove()}})})}newtab.registerPlugin({type:"invisible",id:"fav-group",edit:function(a){var b=newtab.getPlugin("favorites").getActiveGroupId();service("favorites",function(a){a.getGroups(function(a){var c=_.indexOf(_.pluck(a,"id"),b);0<=c&&f(a[c])})})},add:function(){f(null)},remove:function(){var e=newtab.getPlugin("favorites").getActiveGroupId();
confirm(i18n.translate("favgrp_delconfirm","Are you sure you want to delete this group?\n All its dials will be lost"))&&service("favorites",function(b){b.deleteGroup(e,function(b){a("#newtab").removeClass("edit-mode").addClass("work-mode");a(".plugin-button.content.favorites-"+e).remove();a("#fav-group-dialog").sdModal("close");newtab.showContent()});trackUserEvent("group-delete",utils.locale())})}})})(jQuery);
